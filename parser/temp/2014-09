From MAILER-DAEMON Wed Sep 03 22:23:31 2014
Received: from list by lists.gnu.org with archive (Exim 4.71)
	id 1XPMhv-0000fv-IU
	for mharc-bug-tar@gnu.org; Wed, 03 Sep 2014 22:23:31 -0400
Received: from eggs.gnu.org ([2001:4830:134:3::10]:51751)
	by lists.gnu.org with esmtp (Exim 4.71)
	(envelope-from <lex.abalkin@insiberia.net>) id 1XPKqT-0004gd-SQ
	for bug-tar@gnu.org; Wed, 03 Sep 2014 20:24:18 -0400
Received: from Debian-exim by eggs.gnu.org with spam-scanned (Exim 4.71)
	(envelope-from <lex.abalkin@insiberia.net>) id 1XPKqP-0001v3-Hq
	for bug-tar@gnu.org; Wed, 03 Sep 2014 20:24:13 -0400
Received: from latitanza.investici.org ([82.94.249.234]:25884)
	by eggs.gnu.org with esmtp (Exim 4.71)
	(envelope-from <lex.abalkin@insiberia.net>) id 1XPKqP-0001uu-8k
	for bug-tar@gnu.org; Wed, 03 Sep 2014 20:24:09 -0400
Received: from [82.94.249.234] (latitanza [82.94.249.234]) (Authenticated
	sender: lev.abalkin@insiberia.net) by localhost (Postfix) with
	ESMTPSA id 68E4E120809
	for <bug-tar@gnu.org>; Wed,  3 Sep 2014 23:57:24 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=insiberia.net;
	s=stigmate; t=1409788644;
	bh=wfmHFGLrDU1vycTzOJorLnZOoRQskTPml2EJb0rcOSs=;
	h=Date:From:To:Subject;
	b=XsJlil6U98EzYWax5tUftZqGYhOLj+4k4pUEmqCgfogpSNvEdztvvz6J/YlulGVez
	BlGaoO7pB4vzzOWZj2RtCfx0sAVe8FcZDsF2f7tVZvSFUsH/DcbjxDP374kd32xQDs
	d1wRb0ZJ2XsV3gMn4Ldwee4GaJwsrjlU9CsrmP00=
Message-ID: <5407AADB.4050004@insiberia.net>
Date: Thu, 04 Sep 2014 01:57:15 +0200
From: lev abalkin <lex.abalkin@insiberia.net>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:24.0) Gecko/20100101 Icedove/24.7.0
MIME-Version: 1.0
To: bug-tar@gnu.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-detected-operating-system: by eggs.gnu.org: GNU/Linux 3.x [generic] [fuzzy]
X-Received-From: 82.94.249.234
X-Mailman-Approved-At: Wed, 03 Sep 2014 22:23:29 -0400
Subject: [Bug-tar] option in manual not available in man nor info page
X-BeenThere: bug-tar@gnu.org
X-Mailman-Version: 2.1.14
Precedence: list
List-Id: Bug reports for GNU Tar <bug-tar.gnu.org>
List-Unsubscribe: <https://lists.gnu.org/mailman/options/bug-tar>,
	<mailto:bug-tar-request@gnu.org?subject=unsubscribe>
List-Archive: <http://lists.gnu.org/archive/html/bug-tar>
List-Post: <mailto:bug-tar@gnu.org>
List-Help: <mailto:bug-tar-request@gnu.org?subject=help>
List-Subscribe: <https://lists.gnu.org/mailman/listinfo/bug-tar>,
	<mailto:bug-tar-request@gnu.org?subject=subscribe>
X-List-Received-Date: Thu, 04 Sep 2014 00:24:18 -0000

Hello there!


In the GNU (online) manual on `tar` an option called `--skip-old-files'
is mentioned which I can't find in in `tar`'s  `man` nor in the `info
pages. Two links with "more information | see also" on this option seem
to be dead (below)

https://www.gnu.org/software/tar/manual/html_section/tar_22.html#IDX163
(alive) links to
        ->
https://www.gnu.org/software/tar/manual/html_section/tar_34.html#IDX286
(dead?)

https://www.gnu.org/software/tar/manual/html_section/tar_103.html#INDEX1_3
(alive) links to
        ->
https://www.gnu.org/software/tar/manual/html_section/tar_34.html#SEC77

Am I missing something ? Bug? Lost Feature?

I use tar (GNU tar) 1.26 on GNU/Linux (Debian based "Crunchbang 11")


All the best
Lev


From MAILER-DAEMON Thu Sep 04 00:19:39 2014
Received: from list by lists.gnu.org with archive (Exim 4.71)
	id 1XPOWI-0003JK-W1
	for mharc-bug-tar@gnu.org; Thu, 04 Sep 2014 00:19:38 -0400
Received: from eggs.gnu.org ([2001:4830:134:3::10]:56891)
	by lists.gnu.org with esmtp (Exim 4.71)
	(envelope-from <gray@gnu.org.ua>) id 1XPOWD-0003Ic-6X
	for bug-tar@gnu.org; Thu, 04 Sep 2014 00:19:37 -0400
Received: from Debian-exim by eggs.gnu.org with spam-scanned (Exim 4.71)
	(envelope-from <gray@gnu.org.ua>) id 1XPOW8-0008Lm-T7
	for bug-tar@gnu.org; Thu, 04 Sep 2014 00:19:33 -0400
Received: from ulysses.gnu.org.ua ([193.186.15.43]:45232 helo=gnu.org.ua)
	by eggs.gnu.org with esmtp (Exim 4.71)
	(envelope-from <gray@gnu.org.ua>) id 1XPOW8-0008LR-HA
	for bug-tar@gnu.org; Thu, 04 Sep 2014 00:19:28 -0400
X-Mailutils-Message-Id: s8448hH8000776
Organization: GNU.org.ua
Received: from gnu.org.ua (localhost [127.0.0.1]) 
	by ulysses.gnu.org.ua with ESMTP id s8448hH8000776;
	Thu, 4 Sep 2014 07:08:44 +0300
Message-ID: <20140904070843.771@ulysses.gnu.org.ua>
Date: Thu, 04 Sep 2014 07:08:43 +0300
From: Sergey Poznyakoff <gray@gnu.org.ua>
To: "lev abalkin" <lex.abalkin@insiberia.net>
In-reply-to: Your message of Thu,
	04 Sep 2014 01:57:15 +0200 <5407AADB.4050004@insiberia.net>
References: <5407AADB.4050004@insiberia.net>
X-Mailer: MH-E 8.3.1; GNU Mailutils 2.99.98; GNU Emacs 24.2.1
X-detected-operating-system: by eggs.gnu.org: GNU/Linux 3.x
X-Received-From: 193.186.15.43
Cc: bug-tar@gnu.org
Subject: Re: [Bug-tar] option in manual not available in man nor info page
X-BeenThere: bug-tar@gnu.org
X-Mailman-Version: 2.1.14
Precedence: list
List-Id: Bug reports for GNU Tar <bug-tar.gnu.org>
List-Unsubscribe: <https://lists.gnu.org/mailman/options/bug-tar>,
	<mailto:bug-tar-request@gnu.org?subject=unsubscribe>
List-Archive: <http://lists.gnu.org/archive/html/bug-tar>
List-Post: <mailto:bug-tar@gnu.org>
List-Help: <mailto:bug-tar-request@gnu.org?subject=help>
List-Subscribe: <https://lists.gnu.org/mailman/listinfo/bug-tar>,
	<mailto:bug-tar-request@gnu.org?subject=subscribe>
X-List-Received-Date: Thu, 04 Sep 2014 04:19:37 -0000

lev abalkin <lex.abalkin@insiberia.net> ha escrit:

> pages. Two links with "more information | see also" on this option seem
> to be dead (below)
> 
> https://www.gnu.org/software/tar/manual/html_section/tar_22.html#IDX163
> (alive) links to
>         ->
> https://www.gnu.org/software/tar/manual/html_section/tar_34.html#IDX286
> (dead?)

Thanks for noticing. It's been fixed.

Regards,
Sergey


From MAILER-DAEMON Thu Sep 04 12:38:42 2014
Received: from list by lists.gnu.org with archive (Exim 4.71)
	id 1XPa3W-0003S5-Kd
	for mharc-bug-tar@gnu.org; Thu, 04 Sep 2014 12:38:42 -0400
Received: from eggs.gnu.org ([2001:4830:134:3::10]:59408)
	by lists.gnu.org with esmtp (Exim 4.71) (envelope-from <pv4@bk.ru>)
	id 1XPa3P-0003I6-Ac
	for bug-tar@gnu.org; Thu, 04 Sep 2014 12:38:40 -0400
Received: from Debian-exim by eggs.gnu.org with spam-scanned (Exim 4.71)
	(envelope-from <pv4@bk.ru>) id 1XPa3J-0005xD-SE
	for bug-tar@gnu.org; Thu, 04 Sep 2014 12:38:35 -0400
Received: from f103.i.mail.ru ([128.140.169.162]:59079)
	by eggs.gnu.org with esmtp (Exim 4.71) (envelope-from <pv4@bk.ru>)
	id 1XPa3J-0005th-9T
	for bug-tar@gnu.org; Thu, 04 Sep 2014 12:38:29 -0400
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed; d=bk.ru;
	s=mail; 
	h=Content-Type:Message-ID:Reply-To:Date:Mime-Version:Subject:To:From;
	bh=x3N0HjvA42qBqwiGefMEWDk0oZiBwBYpJVHu3t07eZI=; 
	b=JoyIKk0wRvOiUzL8cRFw6FNgZiLrKvXODrV6yYuZqbFqADOWxQE9Nh+gfJp9HieYxMLiJZBje39dHtY0NtwV6j9l2LYUv65y3rngNSXoRLrcmXE8NPpeCwr3rs9vJjlSoePRbSMfVrsZfRiWMNUG/nr1ETyHpexAqpH6ksZ/VWg=;
Received: from [128.75.169.45] (ident=mail)
	by f103.i.mail.ru with local (envelope-from <pv4@bk.ru>)
	id 1XPa3F-0008In-V9
	for bug-tar@gnu.org; Thu, 04 Sep 2014 20:38:26 +0400
Received: from [128.75.169.45] by e.mail.ru with HTTP;
	Thu, 04 Sep 2014 20:38:25 +0400
From: =?UTF-8?B?VmxhZGltaXIgQS4gUGF2bG92?= <pv4@bk.ru>
To: =?UTF-8?B?YnVnLXRhcg==?= <bug-tar@gnu.org>
Mime-Version: 1.0
X-Mailer: Mail.Ru Mailer 1.0
X-Originating-IP: [128.75.169.45]
Date: Thu, 04 Sep 2014 20:38:25 +0400
X-Priority: 3 (Normal)
Message-ID: <1409848705.152057547@f103.i.mail.ru>
X-Cloud-Ids: 
Content-Type: multipart/alternative;
	boundary="--ALT--0fFjTuk8AbBGa4C8idRYJj9D4BqbuOa91409848705"
X-Mras: Ok
X-Spam: undefined
X-detected-operating-system: by eggs.gnu.org: Genre and OS details not
	recognized.
X-Received-From: 128.140.169.162
Subject: [Bug-tar] =?utf-8?q?Status_of_feature_request=3A_ignore_requested?=
 =?utf-8?q?_members_missing_in_archive?=
X-BeenThere: bug-tar@gnu.org
X-Mailman-Version: 2.1.14
Precedence: list
Reply-To: =?UTF-8?B?VmxhZGltaXIgQS4gUGF2bG92?= <pv4@bk.ru>
List-Id: Bug reports for GNU Tar <bug-tar.gnu.org>
List-Unsubscribe: <https://lists.gnu.org/mailman/options/bug-tar>,
	<mailto:bug-tar-request@gnu.org?subject=unsubscribe>
List-Archive: <http://lists.gnu.org/archive/html/bug-tar>
List-Post: <mailto:bug-tar@gnu.org>
List-Help: <mailto:bug-tar-request@gnu.org?subject=help>
List-Subscribe: <https://lists.gnu.org/mailman/listinfo/bug-tar>,
	<mailto:bug-tar-request@gnu.org?subject=subscribe>
X-List-Received-Date: Thu, 04 Sep 2014 16:38:40 -0000


----ALT--0fFjTuk8AbBGa4C8idRYJj9D4BqbuOa91409848705
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: base64

IERlYXIgdGFyIGRldmVsb3BlcnMhCgpDb3VsZCB5b3UgcGxlYXNlIGNsYXJpZnkgdGhlIHN0YXR1
cyBvZiBteSBwcmV2aW91cyBlbWFpbCB3aXRoIGEgcGF0Y2ggZm9yCmZlYXR1cmUgcmVxdWVzdDog
IGh0dHA6Ly9saXN0cy5nbnUub3JnL2FyY2hpdmUvaHRtbC9idWctdGFyLzIwMTQtMDYvbXNnMDAw
MDMuaHRtbCA/CgpUaGUgcHJldmlvdXMgc3RhdHVzIHJlcXVlc3Qgd2FzIHNlbnQgYSBtb250aCBh
bmQgYSBoYWxmIGFnbyBhbmQgaXQgd2FzIHNhaWQKdGhlIHJlcXVlc3Qgd291bGQgYmUgcHJvY2Vz
c2VkIGFmdGVyIHNvbWUgdGltZToKaHR0cDovL2xpc3RzLmdudS5vcmcvYXJjaGl2ZS9odG1sL2J1
Zy10YXIvMjAxNC0wNy9tc2cwMDAyNS5odG1sCgpJIHdvdWxkbid0IGxpa2UgdG8gcHJlc3MgeW91
IChJIHVuZGVyc3RhbmQgeW91IG1heSBiZSBidXN5IG9yIG1heSBoYXZlIHBlcnNvbmFsCmFmZmFp
cnMpIGJ1dCBJIGp1c3Qgd291bGQgbGlrZSB0byBrbm93IHRoZSByZXF1ZXN0IGlzIG5vdCBmb3Jn
b3R0ZW4uCgotLSAKVmxhZGltaXIgQS4gUGF2bG92

----ALT--0fFjTuk8AbBGa4C8idRYJj9D4BqbuOa91409848705
Content-Type: text/html; charset=utf-8
Content-Transfer-Encoding: base64

CjxIVE1MPjxCT0RZPkRlYXIgdGFyIGRldmVsb3BlcnMhPGJyPiA8YnI+IENvdWxkIHlvdSBwbGVh
c2UgY2xhcmlmeSB0aGUgc3RhdHVzIG9mIG15IHByZXZpb3VzIGVtYWlsIHdpdGggYSBwYXRjaCBm
b3I8YnI+IGZlYXR1cmUgcmVxdWVzdDogPGEgaHJlZj0iaHR0cDovL2xpc3RzLmdudS5vcmcvYXJj
aGl2ZS9odG1sL2J1Zy10YXIvMjAxNC0wNi9tc2cwMDAwMy5odG1sIiB0YXJnZXQ9Il9ibGFuayIg
ZGF0YS1tY2UtaHJlZj0iaHR0cDovL2xpc3RzLmdudS5vcmcvYXJjaGl2ZS9odG1sL2J1Zy10YXIv
MjAxNC0wNi9tc2cwMDAwMy5odG1sIj5odHRwOi8vbGlzdHMuZ251Lm9yZy9hcmNoaXZlL2h0bWwv
YnVnLXRhci8yMDE0LTA2L21zZzAwMDAzLmh0bWw8L2E+ID88YnI+PGJyPlRoZSBwcmV2aW91cyBz
dGF0dXMgcmVxdWVzdCB3YXMgc2VudCBhIG1vbnRoIGFuZCBhIGhhbGYgYWdvIGFuZCBpdCB3YXMg
c2FpZDxicj50aGUgcmVxdWVzdCB3b3VsZCBiZSBwcm9jZXNzZWQgYWZ0ZXIgc29tZSB0aW1lOjxi
cj48YSBocmVmPSJodHRwOi8vbGlzdHMuZ251Lm9yZy9hcmNoaXZlL2h0bWwvYnVnLXRhci8yMDE0
LTA3L21zZzAwMDI1Lmh0bWwiPmh0dHA6Ly9saXN0cy5nbnUub3JnL2FyY2hpdmUvaHRtbC9idWct
dGFyLzIwMTQtMDcvbXNnMDAwMjUuaHRtbDwvYT48YnI+PGJyPkkgd291bGRuJ3QgbGlrZSB0byBw
cmVzcyB5b3UgKEkgdW5kZXJzdGFuZCB5b3UgbWF5IGJlIGJ1c3kgb3IgbWF5IGhhdmUgcGVyc29u
YWw8YnI+YWZmYWlycykgYnV0IEkganVzdCB3b3VsZCBsaWtlIHRvIGtub3cgdGhlIHJlcXVlc3Qg
aXMgbm90IGZvcmdvdHRlbi48YnI+PGJyPi0tIDxicj5WbGFkaW1pciBBLiBQYXZsb3Y8L0JPRFk+
PC9IVE1MPgo=

----ALT--0fFjTuk8AbBGa4C8idRYJj9D4BqbuOa91409848705--


From MAILER-DAEMON Mon Sep 15 19:52:22 2014
Received: from list by lists.gnu.org with archive (Exim 4.71)
	id 1XTg4E-00028x-DF
	for mharc-bug-tar@gnu.org; Mon, 15 Sep 2014 19:52:22 -0400
Received: from eggs.gnu.org ([2001:4830:134:3::10]:49976)
	by lists.gnu.org with esmtp (Exim 4.71)
	(envelope-from <marmarek@invisiblethingslab.com>) id 1XTZIN-00033N-4C
	for bug-tar@gnu.org; Mon, 15 Sep 2014 12:38:38 -0400
Received: from Debian-exim by eggs.gnu.org with spam-scanned (Exim 4.71)
	(envelope-from <marmarek@invisiblethingslab.com>) id 1XTZIE-00061e-Qi
	for bug-tar@gnu.org; Mon, 15 Sep 2014 12:38:31 -0400
Received: from out1-smtp.messagingengine.com ([66.111.4.25]:36955)
	by eggs.gnu.org with esmtp (Exim 4.71)
	(envelope-from <marmarek@invisiblethingslab.com>) id 1XTZIE-00060c-9u
	for bug-tar@gnu.org; Mon, 15 Sep 2014 12:38:22 -0400
Received: from compute2.internal (compute2.nyi.internal [10.202.2.42])
	by gateway2.nyi.internal (Postfix) with ESMTP id 8316120492
	for <bug-tar@gnu.org>; Mon, 15 Sep 2014 12:38:20 -0400 (EDT)
Received: from frontend2 ([10.202.2.161])
	by compute2.internal (MEProxy); Mon, 15 Sep 2014 12:38:20 -0400
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=
	invisiblethingslab.com; h=message-id:date:from:mime-version:to
	:subject:content-type; s=mesmtp; bh=7hxXtsx6BvN/ngUJ1WEGlfjG8F4=; b=
	cm16+tt966suTjzS5NK97V8LpbyN9pCsJgH4cq0FmiEIWe1IrMyYXHOvIkeBe1Ec
	Xl8WFm/x8C5spiCs+jEkT+op3klX/IXqPNPz3P6aAU5TsDv/5oAyyPWgBZhpqyVk
	ZxAw2YbIbTnVOzgzmgHZCZ1Er4RdN0XmD2J3KT6DYO0=
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=
	messagingengine.com; h=message-id:date:from:mime-version:to
	:subject:content-type; s=smtpout; bh=7hxXtsx6BvN/ngUJ1WEGlfjG8F4
	=; b=b/mhgQcKk/ajnAXe26Ozc/shyLbY6j42V6oGyn2+2ty5vBxLsP73Ge2Q/1K
	jBPQGdrqX2cGILVD7SptYFYLSo+hrIeIY+ztFB3drYaZvLoPfXTwqzd7D55nmQTK
	VPn2bk5oQtgkGV4y7zJQHz6BmujzTeHB2Do20U36D2aBOPww=
X-Sasl-enc: TEKg6n6Y57LnT4d8LH6Q0Vg4r6PbqvH8LfCRflKzhDYz 1410799100
Received: from [10.137.2.24] (unknown [87.206.235.224])
	by mail.messagingengine.com (Postfix) with ESMTPA id BF10268011D
	for <bug-tar@gnu.org>; Mon, 15 Sep 2014 12:38:19 -0400 (EDT)
Message-ID: <541715F5.6010302@invisiblethingslab.com>
Date: Mon, 15 Sep 2014 18:38:13 +0200
From: =?UTF-8?B?TWFyZWsgTWFyY3p5a293c2tpLUfDs3JlY2tp?=
	<marmarek@invisiblethingslab.com>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:24.0) Gecko/20100101 Thunderbird/24.7.0
MIME-Version: 1.0
To: bug-tar@gnu.org
X-Enigmail-Version: 1.6
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature";
	boundary="HpcnTqvMIDmsWINcbkbLFaVBi3i5hfDNU"
X-detected-operating-system: by eggs.gnu.org: Genre and OS details not
	recognized.
X-Received-From: 66.111.4.25
X-Mailman-Approved-At: Mon, 15 Sep 2014 19:52:20 -0400
Subject: [Bug-tar] [bug] multi-volume archive not compatible with --sparse
X-BeenThere: bug-tar@gnu.org
X-Mailman-Version: 2.1.14
Precedence: list
List-Id: Bug reports for GNU Tar <bug-tar.gnu.org>
List-Unsubscribe: <https://lists.gnu.org/mailman/options/bug-tar>,
	<mailto:bug-tar-request@gnu.org?subject=unsubscribe>
List-Archive: <http://lists.gnu.org/archive/html/bug-tar>
List-Post: <mailto:bug-tar@gnu.org>
List-Help: <mailto:bug-tar-request@gnu.org?subject=help>
List-Subscribe: <https://lists.gnu.org/mailman/listinfo/bug-tar>,
	<mailto:bug-tar-request@gnu.org?subject=subscribe>
X-List-Received-Date: Mon, 15 Sep 2014 16:38:38 -0000

This is an OpenPGP/MIME signed message (RFC 4880 and 3156)
--HpcnTqvMIDmsWINcbkbLFaVBi3i5hfDNU
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Hi,

I've noticed that sparse file header can't be splitted across multiple ar=
chive
volume. So if you try to make a multi-volume archive of a big sparse file=

(with a lot of holes), it can happen that a file header (list of the hole=
s)
will not fit on the same archive volume. Tar then continues such a header=
 on
the next volume, but *without any tar archive header*. If even second vol=
ume
isn't enough, it looks like the header got truncated there and tar starts=
 the
file data (with a proper header this time) on the next volume.
When you try to extract such a file from an archive, tar complains that t=
he
second volume doesn't look like tar archive. When you concatenate all the=

volumes and extract this archive, it will look better (apart from "tar:
Skipping to next header" message), but the file will be broken.

The worst thing here - tar pretends that the archive was successfully cre=
ated,
the user do not get any error message during creation of such archive.

Tested on tar 1.26 (Fedora 20), confirmed on 1.28 compiled from sources.

Steps to reproduce:
1. Create sparse file:
for i in `seq 10000`; do
  yes | dd bs=3D512 count=3D1
  dd if=3D/dev/zero bs=3D1024 count=3D20
done |cp --sparse=3Dalways /dev/stdin sparse.bin

1a. Check the file:
ls -lhs sparse.bin
81M -rw------- 1 user user 201M Sep 15 04:10 sparse.bin
md5sum sparse.bin
11a7794e3b5650d6c6779cbb9cd24c68  sparse.bin

2. Create multi-volume archive:
tar cf sparse.tar.000 --tape-length 128 --sparse sparse.bin
(enter new names like sparse.tar.001 etc when prompted for next volume)

3. Try to extract:
$ tar xMf sparse.tar.000
Prepare volume #2 for `sparse.tar.000' and hit return: n sparse.tar.001
tar: `sparse.bin' is not continued on this volume
Prepare volume #2 for `sparse.tar.001' and hit return:

4. Try to concatenate volumes and extract:
$ cat sparse.tar.* |tar xM
tar: Skipping to next header
tar: Exiting with failure status due to previous errors

5. Verify extracted file:
ls -lhs sparse.bin
40M -rw------- 1 user user 201M Sep 15 04:10 sparse.bin
md5sum sparse.bin
081154090bd6862985960a433a7a06a9  sparse.bin
It's different than original file!

--=20
Best Regards,
Marek Marczykowski-G=C3=B3recki
Invisible Things Lab
A: Because it messes up the order in which people normally read text.
Q: Why is top-posting such a bad thing?


--HpcnTqvMIDmsWINcbkbLFaVBi3i5hfDNU
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1
Comment: Using GnuPG with Thunderbird - http://www.enigmail.net/

iQEcBAEBAgAGBQJUFxX1AAoJENuP0xzK19cs7tIH/RYOPGyVhN3FeSFotIZQfcH8
ypbFLzjdxqxGOs40CEbr1BCI1L2d2drnUh1HYIwjKqcnEFKgJY+ivPEUEiLmNvHW
2+Ln1KiVpH8hULEeWsVeu/2FPzAWCIp9cksDV2Fe+i6CkoJ6zjbv+jfU9XCY3EAT
DFZwifDBcT+/dpdT37IXUm0ljU27Vrqv9A1djmg6A9u/Qd2/+iPYbCa08m/f/A1i
cm/XDl+FoJZWccUg43qIvYzyVwU+UzpxhTCHjcCc5ZsAmFH1y+l8PbPMATh4RpxL
hnOWAFXfwEvQ5xCCNkDeb7Sw+PTzzCPJJ+DzGtFkplAjUNUnhANZfkbiECN0pjs=
=muRd
-----END PGP SIGNATURE-----

--HpcnTqvMIDmsWINcbkbLFaVBi3i5hfDNU--


From MAILER-DAEMON Mon Sep 15 19:52:24 2014
Received: from list by lists.gnu.org with archive (Exim 4.71)
	id 1XTg4G-0002BT-JI
	for mharc-bug-tar@gnu.org; Mon, 15 Sep 2014 19:52:24 -0400
Received: from eggs.gnu.org ([2001:4830:134:3::10]:52914)
	by lists.gnu.org with esmtp (Exim 4.71)
	(envelope-from <marmarek@mimuw.edu.pl>) id 1XTbUo-0007Ul-H0
	for bug-tar@gnu.org; Mon, 15 Sep 2014 14:59:37 -0400
Received: from Debian-exim by eggs.gnu.org with spam-scanned (Exim 4.71)
	(envelope-from <marmarek@mimuw.edu.pl>) id 1XTbUh-0008RF-0L
	for bug-tar@gnu.org; Mon, 15 Sep 2014 14:59:30 -0400
Received: from mail.mimuw.edu.pl ([193.0.96.6]:40835)
	by eggs.gnu.org with esmtp (Exim 4.71)
	(envelope-from <marmarek@mimuw.edu.pl>) id 1XTbUg-0008Px-L7
	for bug-tar@gnu.org; Mon, 15 Sep 2014 14:59:22 -0400
Received: from localhost (localhost [127.0.0.1] ident=amavis)
	by duch.mimuw.edu.pl (Postfix) with ESMTP id 2B4D43DB
	for <bug-tar@gnu.org>; Mon, 15 Sep 2014 20:59:14 +0200 (CEST)
X-Virus-Scanned: amavisd-new at mimuw.edu.pl
Received: from duch.mimuw.edu.pl ([127.0.0.1])
	by localhost (mail.mimuw.edu.pl [127.0.0.1]) (amavisd-new, port 10026)
	with ESMTP id r3Tt8IZHzHVw for <bug-tar@gnu.org>;
	Mon, 15 Sep 2014 20:59:12 +0200 (CEST)
Received: from [10.137.2.24] (87-206-235-224.dynamic.chello.pl
	[87.206.235.224])
	(using TLSv1 with cipher ECDHE-RSA-AES128-SHA (128/128 bits))
	(No client certificate requested)
	by duch.mimuw.edu.pl (Postfix) with ESMTPSA
	for <bug-tar@gnu.org>; Mon, 15 Sep 2014 20:59:11 +0200 (CEST)
Message-ID: <541736FB.8000307@mimuw.edu.pl>
Date: Mon, 15 Sep 2014 20:59:07 +0200
From: =?UTF-8?B?TWFyZWsgTWFyY3p5a293c2tpLUfDs3JlY2tp?= <marmarek@mimuw.edu.pl>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:24.0) Gecko/20100101 Thunderbird/24.7.0
MIME-Version: 1.0
To: bug-tar@gnu.org
X-Enigmail-Version: 1.6
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature";
	boundary="LXcm09EBCFapXAL88TMsIwBJ5bWXMqMSt"
X-detected-operating-system: by eggs.gnu.org: GNU/Linux 3.x
X-Received-From: 193.0.96.6
X-Mailman-Approved-At: Mon, 15 Sep 2014 19:52:22 -0400
Subject: [Bug-tar] [bug] multi-volume archive not compatible with --sparse
X-BeenThere: bug-tar@gnu.org
X-Mailman-Version: 2.1.14
Precedence: list
List-Id: Bug reports for GNU Tar <bug-tar.gnu.org>
List-Unsubscribe: <https://lists.gnu.org/mailman/options/bug-tar>,
	<mailto:bug-tar-request@gnu.org?subject=unsubscribe>
List-Archive: <http://lists.gnu.org/archive/html/bug-tar>
List-Post: <mailto:bug-tar@gnu.org>
List-Help: <mailto:bug-tar-request@gnu.org?subject=help>
List-Subscribe: <https://lists.gnu.org/mailman/listinfo/bug-tar>,
	<mailto:bug-tar-request@gnu.org?subject=subscribe>
X-List-Received-Date: Mon, 15 Sep 2014 18:59:38 -0000

This is an OpenPGP/MIME signed message (RFC 4880 and 3156)
--LXcm09EBCFapXAL88TMsIwBJ5bWXMqMSt
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Hi,

I've noticed that sparse file header can't be splitted across multiple ar=
chive
volume. So if you try to make a multi-volume archive of a big sparse file=

(with a lot of holes), it can happen that a file header (list of the hole=
s)
will not fit on the same archive volume. Tar then continues such a header=
 on
the next volume, but *without any tar archive header*. If even second vol=
ume
isn't enough, it looks like the header got truncated there and tar starts=
 the
file data (with a proper header this time) on the next volume.
When you try to extract such a file from an archive, tar complains that t=
he
second volume doesn't look like tar archive. When you concatenate all the=

volumes and extract this archive, it will look better (apart from "tar:
Skipping to next header" message), but the file will be broken.

The worst thing here - tar pretends that the archive was successfully cre=
ated,
the user do not get any error message during creation of such archive.

Tested on tar 1.26 (Fedora 20), confirmed on 1.28 compiled from sources.

Steps to reproduce:
1. Create sparse file:
for i in `seq 10000`; do
  yes | dd bs=3D512 count=3D1
  dd if=3D/dev/zero bs=3D1024 count=3D20
done |cp --sparse=3Dalways /dev/stdin sparse.bin

1a. Check the file:
ls -lhs sparse.bin
81M -rw------- 1 user user 201M Sep 15 04:10 sparse.bin
md5sum sparse.bin
11a7794e3b5650d6c6779cbb9cd24c68  sparse.bin

2. Create multi-volume archive:
tar cf sparse.tar.000 --tape-length 128 --sparse sparse.bin
(enter new names like sparse.tar.001 etc when prompted for next volume)

3. Try to extract:
$ tar xMf sparse.tar.000
Prepare volume #2 for `sparse.tar.000' and hit return: n sparse.tar.001
tar: `sparse.bin' is not continued on this volume
Prepare volume #2 for `sparse.tar.001' and hit return:

4. Try to concatenate volumes and extract:
$ cat sparse.tar.* |tar xM
tar: Skipping to next header
tar: Exiting with failure status due to previous errors

5. Verify extracted file:
ls -lhs sparse.bin
40M -rw------- 1 user user 201M Sep 15 04:10 sparse.bin
md5sum sparse.bin
081154090bd6862985960a433a7a06a9  sparse.bin
It's different than original file!

--=20
Pozdrawiam / Best Regards,
Marek Marczykowski-G=C3=B3recki | RLU #390519
marmarek at mimuw edu pl   | xmpp:marmarek at staszic waw pl


--LXcm09EBCFapXAL88TMsIwBJ5bWXMqMSt
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1
Comment: Using GnuPG with Thunderbird - http://www.enigmail.net/

iEYEARECAAYFAlQXNvsACgkQXmmj5DNap+r4twCfVR9fVy22Nsh1r4D6DbCqw0/r
yUgAn382hoF0lQFfQHzDnhzeBbdU81cA
=RTZY
-----END PGP SIGNATURE-----

--LXcm09EBCFapXAL88TMsIwBJ5bWXMqMSt--


From MAILER-DAEMON Tue Sep 16 03:48:48 2014
Received: from list by lists.gnu.org with archive (Exim 4.71)
	id 1XTnVI-00033w-EH
	for mharc-bug-tar@gnu.org; Tue, 16 Sep 2014 03:48:48 -0400
Received: from eggs.gnu.org ([2001:4830:134:3::10]:44804)
	by lists.gnu.org with esmtp (Exim 4.71)
	(envelope-from <joerg.schilling@fokus.fraunhofer.de>)
	id 1XTnVB-00033G-QD
	for bug-tar@gnu.org; Tue, 16 Sep 2014 03:48:46 -0400
Received: from Debian-exim by eggs.gnu.org with spam-scanned (Exim 4.71)
	(envelope-from <joerg.schilling@fokus.fraunhofer.de>)
	id 1XTnV6-00012h-Fd
	for bug-tar@gnu.org; Tue, 16 Sep 2014 03:48:41 -0400
Received: from mx-relay37-dus.antispameurope.com ([94.100.134.237]:42525)
	by eggs.gnu.org with esmtp (Exim 4.71)
	(envelope-from <joerg.schilling@fokus.fraunhofer.de>)
	id 1XTnV6-00011C-5h
	for bug-tar@gnu.org; Tue, 16 Sep 2014 03:48:36 -0400
Received: from smtpsrv1.fokus.fraunhofer.de ([195.37.77.166]) by
	mx-gate37-dus.antispameurope.com; Tue, 16 Sep 2014 09:48:27 +0200
Received: from CURIE.fokus.fraunhofer.de (curie.fokus.fraunhofer.de
	[IPv6:2001:638:806:9::203] (may be forged))
	by smtpsrv1.fokus.fraunhofer.de (8.14.4/8.14.4) with ESMTP id
	s8G7mO3R025736
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=OK);
	Tue, 16 Sep 2014 09:48:24 +0200
Received: from rigel (10.147.13.100) by CURIE.fokus.fraunhofer.de
	(10.147.9.203) with Microsoft SMTP Server id 14.3.195.1;
	Tue, 16 Sep 2014 09:48:24 +0200
Date: Tue, 16 Sep 2014 09:48:24 +0200
From: Joerg Schilling <Joerg.Schilling@fokus.fraunhofer.de>
To: <marmarek@invisiblethingslab.com>, <bug-tar@gnu.org>
Message-ID: <5417eb48.qrk6yJdzMsbC5CaX%Joerg.Schilling@fokus.fraunhofer.de>
References: <541715F5.6010302@invisiblethingslab.com>
In-Reply-To: <541715F5.6010302@invisiblethingslab.com>
User-Agent: nail 11.22 3/20/05
MIME-Version: 1.0
Content-Type: text/plain; charset="ISO-8859-1"
Content-Transfer-Encoding: 8bit
X-KSE-Antivirus-Interceptor-Info: protection disabled
X-cloud-security-sender: joerg.schilling@fokus.fraunhofer.de
X-cloud-security-recipient: bug-tar@gnu.org
X-cloud-security-Virusscan: CLEAN
X-cloud-security-disclaimer: This E-Mail was scanned by E-Mailservice on
	mx-gate37-dus with 222EA2118008
X-cloud-security-connect: smtpsrv1.fokus.fraunhofer.de[195.37.77.166], TLS=,
	IP=195.37.77.166
X-cloud-security: scantime:.1812
X-detected-operating-system: by eggs.gnu.org: GNU/Linux 2.6.x
X-Received-From: 94.100.134.237
Subject: Re: [Bug-tar] [bug] multi-volume archive not compatible with
	--sparse
X-BeenThere: bug-tar@gnu.org
X-Mailman-Version: 2.1.14
Precedence: list
List-Id: Bug reports for GNU Tar <bug-tar.gnu.org>
List-Unsubscribe: <https://lists.gnu.org/mailman/options/bug-tar>,
	<mailto:bug-tar-request@gnu.org?subject=unsubscribe>
List-Archive: <http://lists.gnu.org/archive/html/bug-tar>
List-Post: <mailto:bug-tar@gnu.org>
List-Help: <mailto:bug-tar-request@gnu.org?subject=help>
List-Subscribe: <https://lists.gnu.org/mailman/listinfo/bug-tar>,
	<mailto:bug-tar-request@gnu.org?subject=subscribe>
X-List-Received-Date: Tue, 16 Sep 2014 07:48:47 -0000

Marek Marczykowski-Górecki <marmarek@invisiblethingslab.com> wrote:

> Hi,
>
> I've noticed that sparse file header can't be splitted across multiple archive
> volume. So if you try to make a multi-volume archive of a big sparse file
> (with a lot of holes), it can happen that a file header (list of the holes)
> will not fit on the same archive volume. Tar then continues such a header on
> the next volume, but *without any tar archive header*. If even second volume
> isn't enough, it looks like the header got truncated there and tar starts the
> file data (with a proper header this time) on the next volume.
> When you try to extract such a file from an archive, tar complains that the
> second volume doesn't look like tar archive. When you concatenate all the
> volumes and extract this archive, it will look better (apart from "tar:
> Skipping to next header" message), but the file will be broken.
>
> The worst thing here - tar pretends that the archive was successfully created,
> the user do not get any error message during creation of such archive.
>
> Tested on tar 1.26 (Fedora 20), confirmed on 1.28 compiled from sources.

This is a well known problem in gtar. Gtar did never handle multi volume 
archives decently. The way gtar tries to verify the correctness of a follow up 
volume cannot work. This is why star does not support to emulate to write the 
gtar multi volume method. Star should however be able to extract the archive
as star ignores the gtar verification method.

See: http://cdrtools.sourceforge.net/private/man/star/
and http://cdrtools.sourceforge.net/private/man/star/star.4.html for a 
documentation of the archive file format used by star. Star uses a method that 
is able to correctly verify whether you used the right folow up volume.

See also: https://sourceforge.net/projects/s-tar/?source=directory
and https://sourceforge.net/projects/schilytools/?source=directory for frequent 
source snapshots.

Jörg

-- 
 EMail:joerg@schily.net                    (home) Jörg Schilling D-13353 Berlin
       joerg.schilling@fokus.fraunhofer.de (work) Blog: http://schily.blogspot.com/
 URL:  http://cdrecord.org/private/ http://sourceforge.net/projects/schilytools/files/'


From MAILER-DAEMON Thu Sep 18 10:17:04 2014
Received: from list by lists.gnu.org with archive (Exim 4.71)
	id 1XUcW8-0006kD-7J
	for mharc-bug-tar@gnu.org; Thu, 18 Sep 2014 10:17:04 -0400
Received: from eggs.gnu.org ([2001:4830:134:3::10]:59694)
	by lists.gnu.org with esmtp (Exim 4.71)
	(envelope-from <martineau@zmanda.com>) id 1XUcVz-0006jH-Bo
	for bug-tar@gnu.org; Thu, 18 Sep 2014 10:17:02 -0400
Received: from Debian-exim by eggs.gnu.org with spam-scanned (Exim 4.71)
	(envelope-from <martineau@zmanda.com>) id 1XUcVr-0007JD-Rz
	for bug-tar@gnu.org; Thu, 18 Sep 2014 10:16:55 -0400
Received: from smtp136.ord.emailsrvr.com ([173.203.6.136]:49256)
	by eggs.gnu.org with esmtp (Exim 4.71)
	(envelope-from <martineau@zmanda.com>) id 1XUcVr-0007Iv-Nu
	for bug-tar@gnu.org; Thu, 18 Sep 2014 10:16:47 -0400
Received: from localhost (localhost.localdomain [127.0.0.1])
	by smtp26.relay.ord1a.emailsrvr.com (SMTP Server) with ESMTP id
	573FE800DD
	for <bug-tar@gnu.org>; Thu, 18 Sep 2014 09:37:49 -0400 (EDT)
X-Virus-Scanned: OK
Received: by smtp26.relay.ord1a.emailsrvr.com (Authenticated sender:
	martineau-AT-zmanda.com) with ESMTPSA id 27789800A1
	for <bug-tar@gnu.org>; Thu, 18 Sep 2014 09:37:49 -0400 (EDT)
X-Sender-Id: martineau@zmanda.com
Received: from localhost.localdomain (modemcable022.253-203-24.mc.videotron.ca
	[24.203.253.22]) (using TLSv1 with cipher DHE-RSA-CAMELLIA256-SHA)
	by 0.0.0.0:465 (trex/5.2.10); Thu, 18 Sep 2014 13:37:49 GMT
Message-ID: <541AE02C.2050008@zmanda.com>
Date: Thu, 18 Sep 2014 09:37:48 -0400
From: Jean-Louis Martineau <martineau@zmanda.com>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:17.0) Gecko/20130110 Thunderbird/17.0.2
MIME-Version: 1.0
To: bug-tar@gnu.org
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-detected-operating-system: by eggs.gnu.org: GNU/Linux 2.6.x
X-Received-From: 173.203.6.136
Subject: [Bug-tar] --files-from and recursive extract (behavior change in
	1.27)
X-BeenThere: bug-tar@gnu.org
X-Mailman-Version: 2.1.14
Precedence: list
List-Id: Bug reports for GNU Tar <bug-tar.gnu.org>
List-Unsubscribe: <https://lists.gnu.org/mailman/options/bug-tar>,
	<mailto:bug-tar-request@gnu.org?subject=unsubscribe>
List-Archive: <http://lists.gnu.org/archive/html/bug-tar>
List-Post: <mailto:bug-tar@gnu.org>
List-Help: <mailto:bug-tar-request@gnu.org?subject=help>
List-Subscribe: <https://lists.gnu.org/mailman/listinfo/bug-tar>,
	<mailto:bug-tar-request@gnu.org?subject=subscribe>
X-List-Received-Date: Thu, 18 Sep 2014 14:17:02 -0000

Hi,

--files-from do not recursively extract since tar-1.27

In tar-1.26, i could put a directory name in a 'list' file and run ' tar 
-xvf archive.tar --files-from list' to extract the directory recursively.
In tar-1.27 and tar-1.28 it extract only the directory, nothing inside it.

How to reproduce:
mkdir dir1
touch dir1/file1.1 dir1/file1.2
tar cf archive.tar dir1
echo dir1 > list
rm -rf dir1
tar xvf archive.tar --files-from list

$../tar-1.26/src/tar xvf archive.tar --files-from list
dir1/
dir1/file1.2
dir1/file1.1

$../tar-1.27/src/tar xvf archive.tar --files-from list
dir1/

$../tar-1.28/src/tar xvf archive.tar --files-from list
dir1/

How to get the same behavior as tar-1.26?


Also, if I put 'dir1/' (with the /) in the list file tar-1.27 and 1.28 
report:
../tar-1.27/src/tar: dir1/: Not found in archive
../tar-1.27/src/tar: Exiting with failure status due to previous errors

tar-1.26 correctly extract it.

Jean-Louis


From MAILER-DAEMON Thu Sep 18 11:14:35 2014
Received: from list by lists.gnu.org with archive (Exim 4.71)
	id 1XUdPn-0002Hc-6t
	for mharc-bug-tar@gnu.org; Thu, 18 Sep 2014 11:14:35 -0400
Received: from eggs.gnu.org ([2001:4830:134:3::10]:44128)
	by lists.gnu.org with esmtp (Exim 4.71)
	(envelope-from <gray@gnu.org.ua>) id 1XUdPh-0002Bj-QZ
	for bug-tar@gnu.org; Thu, 18 Sep 2014 11:14:34 -0400
Received: from Debian-exim by eggs.gnu.org with spam-scanned (Exim 4.71)
	(envelope-from <gray@gnu.org.ua>) id 1XUdPY-0005Wo-QR
	for bug-tar@gnu.org; Thu, 18 Sep 2014 11:14:29 -0400
Received: from ulysses.gnu.org.ua ([193.186.15.43]:52313 helo=gnu.org.ua)
	by eggs.gnu.org with esmtp (Exim 4.71)
	(envelope-from <gray@gnu.org.ua>) id 1XUdPY-0005WL-E9
	for bug-tar@gnu.org; Thu, 18 Sep 2014 11:14:20 -0400
X-Mailutils-Message-Id: s8IF2mAp006256
Organization: GNU.org.ua
Received: from gnu.org.ua (localhost [127.0.0.1]) 
	by ulysses.gnu.org.ua with ESMTP id s8IF2mAp006256;
	Thu, 18 Sep 2014 18:02:48 +0300
Message-ID: <20140918180248.6251@ulysses.gnu.org.ua>
Date: Thu, 18 Sep 2014 18:02:48 +0300
From: Sergey Poznyakoff <gray@gnu.org.ua>
To: "Jean-Louis Martineau" <martineau@zmanda.com>
In-reply-to: Your message of Thu,
	18 Sep 2014 09:37:48 -0400 <541AE02C.2050008@zmanda.com>
References: <541AE02C.2050008@zmanda.com>
X-Mailer: MH-E 8.3.1; GNU Mailutils 2.99.98; GNU Emacs 24.2.1
Content-Type: multipart/mixed; boundary="333582449-1411052568=:6250"
MIME-Version: 1.0
X-detected-operating-system: by eggs.gnu.org: GNU/Linux 3.x
X-Received-From: 193.186.15.43
Cc: bug-tar@gnu.org
Subject: Re: [Bug-tar] --files-from and recursive extract (behavior change
	in 1.27)
X-BeenThere: bug-tar@gnu.org
X-Mailman-Version: 2.1.14
Precedence: list
List-Id: Bug reports for GNU Tar <bug-tar.gnu.org>
List-Unsubscribe: <https://lists.gnu.org/mailman/options/bug-tar>,
	<mailto:bug-tar-request@gnu.org?subject=unsubscribe>
List-Archive: <http://lists.gnu.org/archive/html/bug-tar>
List-Post: <mailto:bug-tar@gnu.org>
List-Help: <mailto:bug-tar-request@gnu.org?subject=help>
List-Subscribe: <https://lists.gnu.org/mailman/listinfo/bug-tar>,
	<mailto:bug-tar-request@gnu.org?subject=subscribe>
X-List-Received-Date: Thu, 18 Sep 2014 15:14:34 -0000

--333582449-1411052568=:6250
Content-ID: <20140918180248.6250.1@ulysses.gnu.org.ua>
Content-Type: text/plain

Hi Jean-Louis,

> --files-from do not recursively extract since tar-1.27

Thanks for reporting.  Please try the attached patch.

Regards,
Sergey


--333582449-1411052568=:6250
Content-Transfer-Encoding: quoted-printable
Content-Description: 
Content-ID: <20140918180248.6250.1@ulysses.gnu.org.ua>
Content-Type: text/x-diff; name="0001-Bugfix-entries-read-from-the-T-file-did-not-get-prop.patch"

>From 890a81d753b506d6dfd2031d6633d3f5be38a966 Mon Sep 17 00:00:00 2001
From: Sergey Poznyakoff <gray@gnu.org.ua>
Date: Thu, 18 Sep 2014 18:06:40 +0300
Subject: [PATCH] Bugfix: entries read from the -T file did not get proper
 matching_flag.

* src/common.h (name_add_file): Change signature.
* src/names.c (name_elt.file) <matching_flags>: New member.
(name_add_file): Take matching flags as third argument.
(read_next_name): Set matching_flags and
recursion_option after opening the file.
* src/tar.c (parse_opt): Pass matching_flags to name_add_file.
---
 src/common.h |  2 +-
 src/names.c  | 16 ++++++++++++----
 src/tar.c    |  2 +-
 3 files changed, 14 insertions(+), 6 deletions(-)

diff --git a/src/common.h b/src/common.h
index edf787c..3cc2011 100644
--- a/src/common.h
+++ b/src/common.h
@@ -725,7 +725,7 @@ int uname_to_uid (char const *uname, uid_t *puid);
 void name_init (void);
 void name_add_name (const char *name, int matching_flags);
 void name_add_dir (const char *name);
-void name_add_file (const char *name, int term);
+void name_add_file (const char *name, int term, int matching_flags);
 void name_term (void);
 const char *name_next (int change_dirs);
 void name_gather (void);
diff --git a/src/names.c b/src/names.c
index 594e7fd..7e920df 100644
--- a/src/names.c
+++ b/src/names.c
@@ -229,6 +229,7 @@ struct name_elt        /* A name_array element. */
       const char *name;/* File name */
       int term;        /* File name terminator in the list */
       FILE *fp;
+      int matching_flags; /* fnmatch options */
     } file;
   } v;
 };
@@ -305,13 +306,14 @@ name_add_dir (const char *name)
 }
 
 void
-name_add_file (const char *name, int term)
+name_add_file (const char *name, int term, int matching_flags)
 {
   struct name_elt *ep =3D name_elt_alloc ();
   ep->type =3D NELT_FILE;
   ep->v.file.name =3D name;
   ep->v.file.term =3D term;
   ep->v.file.fp =3D NULL;
+  ep->v.file.matching_flags =3D matching_flags;
 }
 =0C
 /* Names from external name file.  */
@@ -456,6 +458,8 @@ handle_option (const char *str)
   return 0;
 }
 
+static int matching_flags; /* exclude_fnmatch options */
+
 static int
 read_next_name (struct name_elt *ent, struct name_elt *ret)
 {
@@ -476,6 +480,8 @@ read_next_name (struct name_elt *ent, struct name_elt *ret)
 	  if ((ent->v.file.fp =3D fopen (ent->v.file.name, "r")) =3D=3D NULL)
 	    open_fatal (ent->v.file.name);
 	}
+      matching_flags =3D ent->v.file.matching_flags;
+      recursion_option =3D matching_flags & FNM_LEADING_DIR;
     }
 
   while (1)
@@ -544,8 +550,6 @@ copy_name (struct name_elt *ep)
 }
 
 =0C
-static int matching_flags; /* exclude_fnmatch options */
-
 /* Get the next NELT_NAME element from name_array.  Result is in
    static storage and can't be relied upon across two calls.
 
@@ -553,7 +557,11 @@ static int matching_flags; /* exclude_fnmatch options */
    the request to change to the given directory.
 
    Entries of type NELT_FMASK cause updates of the matching_flags
-   value. */
+   value.
+
+   Entries of type NELT_FILE cause updates of the matching_flags
+   once, before opening the file.
+*/
 static struct name_elt *
 name_next_elt (int change_dirs)
 {
diff --git a/src/tar.c b/src/tar.c
index cd32379..225c624 100644
--- a/src/tar.c
+++ b/src/tar.c
@@ -1641,7 +1641,7 @@ parse_opt (int key, char *arg, struct argp_state *state)
       break;
 
     case 'T':
-      name_add_file (arg, filename_terminator);
+      name_add_file (arg, filename_terminator, MAKE_INCL_OPTIONS (args));
       /* Indicate we've been given -T option. This is for backward
 	 compatibility only, so that `tar cfT archive /dev/null will
 	 succeed */
-- 
1.7.12.1


--333582449-1411052568=:6250--


From MAILER-DAEMON Thu Sep 18 11:33:41 2014
Received: from list by lists.gnu.org with archive (Exim 4.71)
	id 1XUdiH-0000HX-Av
	for mharc-bug-tar@gnu.org; Thu, 18 Sep 2014 11:33:41 -0400
Received: from eggs.gnu.org ([2001:4830:134:3::10]:48870)
	by lists.gnu.org with esmtp (Exim 4.71)
	(envelope-from <martineau@zmanda.com>) id 1XUdi8-0000H5-43
	for bug-tar@gnu.org; Thu, 18 Sep 2014 11:33:39 -0400
Received: from Debian-exim by eggs.gnu.org with spam-scanned (Exim 4.71)
	(envelope-from <martineau@zmanda.com>) id 1XUdi0-0002BA-LT
	for bug-tar@gnu.org; Thu, 18 Sep 2014 11:33:32 -0400
Received: from smtp152.ord.emailsrvr.com ([173.203.6.152]:40303)
	by eggs.gnu.org with esmtp (Exim 4.71)
	(envelope-from <martineau@zmanda.com>) id 1XUdi0-000294-DH
	for bug-tar@gnu.org; Thu, 18 Sep 2014 11:33:24 -0400
Received: from localhost (localhost.localdomain [127.0.0.1])
	by smtp16.relay.ord1a.emailsrvr.com (SMTP Server) with ESMTP id
	CC86F80121; Thu, 18 Sep 2014 11:33:18 -0400 (EDT)
X-Virus-Scanned: OK
Received: by smtp16.relay.ord1a.emailsrvr.com (Authenticated sender:
	martineau-AT-zmanda.com) with ESMTPSA id 99BBA800F8; 
	Thu, 18 Sep 2014 11:33:18 -0400 (EDT)
X-Sender-Id: martineau@zmanda.com
Received: from localhost.localdomain (modemcable022.253-203-24.mc.videotron.ca
	[24.203.253.22]) (using TLSv1 with cipher DHE-RSA-CAMELLIA256-SHA)
	by 0.0.0.0:465 (trex/5.2.10); Thu, 18 Sep 2014 15:33:18 GMT
Message-ID: <541AFB3E.2060102@zmanda.com>
Date: Thu, 18 Sep 2014 11:33:18 -0400
From: Jean-Louis Martineau <martineau@zmanda.com>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:17.0) Gecko/20130110 Thunderbird/17.0.2
MIME-Version: 1.0
To: Sergey Poznyakoff <gray@gnu.org.ua>
References: <541AE02C.2050008@zmanda.com>
	<20140918180248.6251@ulysses.gnu.org.ua>
In-Reply-To: <20140918180248.6251@ulysses.gnu.org.ua>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-detected-operating-system: by eggs.gnu.org: GNU/Linux 2.6.x
X-Received-From: 173.203.6.152
Cc: bug-tar@gnu.org
Subject: Re: [Bug-tar] --files-from and recursive extract (behavior change
 in 1.27)
X-BeenThere: bug-tar@gnu.org
X-Mailman-Version: 2.1.14
Precedence: list
List-Id: Bug reports for GNU Tar <bug-tar.gnu.org>
List-Unsubscribe: <https://lists.gnu.org/mailman/options/bug-tar>,
	<mailto:bug-tar-request@gnu.org?subject=unsubscribe>
List-Archive: <http://lists.gnu.org/archive/html/bug-tar>
List-Post: <mailto:bug-tar@gnu.org>
List-Help: <mailto:bug-tar-request@gnu.org?subject=help>
List-Subscribe: <https://lists.gnu.org/mailman/listinfo/bug-tar>,
	<mailto:bug-tar-request@gnu.org?subject=subscribe>
X-List-Received-Date: Thu, 18 Sep 2014 15:33:40 -0000

Hi Sergey,

The patch fix the first issue I reported, but not the second.

mkdir dir1
touch dir1/file1.1 dir1/file1.2
tar cf archive.tar dir1
echo dir1/ > list ## NOTE the /
rm -rf dir1
tar xvf archive.tar --files-from list

$ ../tar-1.26/src/tar xvf archive.tar --files-from list
dir1/
dir1/file-1.2
dir1/file1-1

$ ../tar-1.28/src/tar xvf archive.tar --files-from list
../tar-1.28/src/tar: dir1/: Not found in archive
../tar-1.28/src/tar: Exiting with failure status due to previous errors

Why it doesn't accept the trailing slash in a files-from, it works on 
command line:
$ ../tar-1.28/src/tar xvf archive.tar dir1/
dir1/
dir1/file-1.2
dir1/file1-1


Jean-Louis

On 09/18/2014 11:02 AM, Sergey Poznyakoff wrote:
> Hi Jean-Louis,
>
>> --files-from do not recursively extract since tar-1.27
> Thanks for reporting.  Please try the attached patch.
>
> Regards,
> Sergey
>



From MAILER-DAEMON Thu Sep 18 16:09:07 2014
Received: from list by lists.gnu.org with archive (Exim 4.71)
	id 1XUi0o-0003S1-W7
	for mharc-bug-tar@gnu.org; Thu, 18 Sep 2014 16:09:06 -0400
Received: from eggs.gnu.org ([2001:4830:134:3::10]:59127)
	by lists.gnu.org with esmtp (Exim 4.71)
	(envelope-from <gray@gnu.org.ua>) id 1XUi0j-0003Km-4D
	for bug-tar@gnu.org; Thu, 18 Sep 2014 16:09:04 -0400
Received: from Debian-exim by eggs.gnu.org with spam-scanned (Exim 4.71)
	(envelope-from <gray@gnu.org.ua>) id 1XUi0a-00017J-Su
	for bug-tar@gnu.org; Thu, 18 Sep 2014 16:09:01 -0400
Received: from ulysses.gnu.org.ua ([193.186.15.43]:56636 helo=gnu.org.ua)
	by eggs.gnu.org with esmtp (Exim 4.71)
	(envelope-from <gray@gnu.org.ua>) id 1XUi0a-000166-HJ
	for bug-tar@gnu.org; Thu, 18 Sep 2014 16:08:52 -0400
X-Mailutils-Message-Id: s8IJvKco025899
Organization: GNU.org.ua
Received: from gnu.org.ua (localhost [127.0.0.1]) 
	by ulysses.gnu.org.ua with ESMTP id s8IJvKco025899;
	Thu, 18 Sep 2014 22:57:20 +0300
Message-ID: <20140918225720.25894@ulysses.gnu.org.ua>
Date: Thu, 18 Sep 2014 22:57:20 +0300
From: Sergey Poznyakoff <gray@gnu.org.ua>
To: "Jean-Louis Martineau" <martineau@zmanda.com>
In-reply-to: Your message of Thu,
	18 Sep 2014 11:33:18 -0400 <541AFB3E.2060102@zmanda.com>
References: <541AE02C.2050008@zmanda.com>
	<20140918180248.6251@ulysses.gnu.org.ua>
	<541AFB3E.2060102@zmanda.com>
X-Mailer: MH-E 8.3.1; GNU Mailutils 2.99.98; GNU Emacs 24.2.1
X-detected-operating-system: by eggs.gnu.org: GNU/Linux 3.x
X-Received-From: 193.186.15.43
Cc: bug-tar@gnu.org
Subject: Re: [Bug-tar] --files-from and recursive extract (behavior change
	in 1.27)
X-BeenThere: bug-tar@gnu.org
X-Mailman-Version: 2.1.14
Precedence: list
List-Id: Bug reports for GNU Tar <bug-tar.gnu.org>
List-Unsubscribe: <https://lists.gnu.org/mailman/options/bug-tar>,
	<mailto:bug-tar-request@gnu.org?subject=unsubscribe>
List-Archive: <http://lists.gnu.org/archive/html/bug-tar>
List-Post: <mailto:bug-tar@gnu.org>
List-Help: <mailto:bug-tar-request@gnu.org?subject=help>
List-Subscribe: <https://lists.gnu.org/mailman/listinfo/bug-tar>,
	<mailto:bug-tar-request@gnu.org?subject=subscribe>
X-List-Received-Date: Thu, 18 Sep 2014 20:09:04 -0000

> The patch fix the first issue I reported, but not the second.

Yes, indeed.  I have installed the following patch instead, which
fixes both issues.

Regards,
Sergey

* src/common.h (name_add_file): Change signature.
* src/names.c (name_elt_alloc_matflags): New function.
(name_add_name): Use name_elt_alloc_matflags.
(name_add_file): Take matching flags as third argument.
(read_next_name): Remove trailing slashes.
* src/tar.c (parse_opt): Pass matching_flags to name_add_file.

* tests/T-dir00.at: New file.
* tests/T-dir01.at: New file.
* tests/Makefile.am: Add new testcases.
* tests/testsuite.at: Likewise.
---
 src/common.h       |  2 +-
 src/names.c        | 56 ++++++++++++++++++++++++++++++++++--------------------
 src/tar.c          |  2 +-
 tests/Makefile.am  |  2 ++
 tests/T-dir00.at   | 45 +++++++++++++++++++++++++++++++++++++++++++
 tests/T-dir01.at   | 45 +++++++++++++++++++++++++++++++++++++++++++
 tests/testsuite.at |  2 ++
 7 files changed, 131 insertions(+), 23 deletions(-)
 create mode 100644 tests/T-dir00.at
 create mode 100644 tests/T-dir01.at

diff --git a/src/common.h b/src/common.h
index edf787c..3cc2011 100644
--- a/src/common.h
+++ b/src/common.h
@@ -725,7 +725,7 @@ int uname_to_uid (char const *uname, uid_t *puid);
 void name_init (void);
 void name_add_name (const char *name, int matching_flags);
 void name_add_dir (const char *name);
-void name_add_file (const char *name, int term);
+void name_add_file (const char *name, int term, int matching_flags);
 void name_term (void);
 const char *name_next (int change_dirs);
 void name_gather (void);
diff --git a/src/names.c b/src/names.c
index 594e7fd..e3e145a 100644
--- a/src/names.c
+++ b/src/names.c
@@ -258,6 +258,21 @@ name_elt_alloc (void)
   return elt;
 }
 
+static struct name_elt *
+name_elt_alloc_matflags (int matflags)
+{
+  static int prev_flags = 0; /* FIXME: Or EXCLUDE_ANCHORED? */
+  struct name_elt *ep = name_elt_alloc ();
+  if (prev_flags != matflags)
+    {
+      ep->type = NELT_FMASK;
+      ep->v.matching_flags = matflags;
+      prev_flags = matflags;
+      ep = name_elt_alloc ();
+    }
+  return ep;
+}
+
 static void
 name_list_adjust (void)
 {
@@ -276,20 +291,13 @@ name_list_advance (void)
   free (elt);
 }
 
-/* Add to name_array the file NAME with fnmatch options MATCHING_FLAGS */
+
+/* Add to name_array the file NAME with fnmatch options MATFLAGS */
 void
-name_add_name (const char *name, int matching_flags)
+name_add_name (const char *name, int matflags)
 {
-  static int prev_flags = 0; /* FIXME: Or EXCLUDE_ANCHORED? */
-  struct name_elt *ep = name_elt_alloc ();
+  struct name_elt *ep = name_elt_alloc_matflags (matflags);
 
-  if (prev_flags != matching_flags)
-    {
-      ep->type = NELT_FMASK;
-      ep->v.matching_flags = matching_flags;
-      prev_flags = matching_flags;
-      ep = name_elt_alloc ();
-    }
   ep->type = NELT_NAME;
   ep->v.name = name;
   name_count++;
@@ -305,9 +313,10 @@ name_add_dir (const char *name)
 }
 
 void
-name_add_file (const char *name, int term)
+name_add_file (const char *name, int term, int matflags)
 {
-  struct name_elt *ep = name_elt_alloc ();
+  struct name_elt *ep = name_elt_alloc_matflags (matflags);
+
   ep->type = NELT_FILE;
   ep->v.file.name = name;
   ep->v.file.term = term;
@@ -389,6 +398,15 @@ add_file_id (const char *filename)
   file_id_list = p;
   return 0;
 }
+
+/* Chop trailing slashes.  */
+static void
+chopslash (char *str)
+{
+  char *p = str + strlen (str) - 1;
+  while (p > str && ISSLASH (*p))
+    *p-- = '\0';
+}
 
 enum read_file_list_state  /* Result of reading file name from the list file */
   {
@@ -428,7 +446,7 @@ read_name_from_file (struct name_elt *ent)
   if (counter == name_buffer_length)
     name_buffer = x2realloc (name_buffer, &name_buffer_length);
   name_buffer[counter] = 0;
-
+  chopslash (name_buffer);
   return (counter == 0 && c == EOF) ? file_list_end : file_list_success;
 }
 
@@ -518,7 +536,6 @@ copy_name (struct name_elt *ep)
 {
   const char *source;
   size_t source_len;
-  char *cursor;
 
   source = ep->v.name;
   source_len = strlen (source);
@@ -536,11 +553,7 @@ copy_name (struct name_elt *ep)
       name_buffer = xmalloc(name_buffer_length + 2);
     }
   strcpy (name_buffer, source);
-
-  /* Zap trailing slashes.  */
-  cursor = name_buffer + strlen (name_buffer) - 1;
-  while (cursor > name_buffer && ISSLASH (*cursor))
-    *cursor-- = '\0';
+  chopslash (name_buffer);
 }
 
 
@@ -553,7 +566,8 @@ static int matching_flags; /* exclude_fnmatch options */
    the request to change to the given directory.
 
    Entries of type NELT_FMASK cause updates of the matching_flags
-   value. */
+   value.
+*/
 static struct name_elt *
 name_next_elt (int change_dirs)
 {
diff --git a/src/tar.c b/src/tar.c
index cd32379..225c624 100644
--- a/src/tar.c
+++ b/src/tar.c
@@ -1641,7 +1641,7 @@ parse_opt (int key, char *arg, struct argp_state *state)
       break;
 
     case 'T':
-      name_add_file (arg, filename_terminator);
+      name_add_file (arg, filename_terminator, MAKE_INCL_OPTIONS (args));
       /* Indicate we've been given -T option. This is for backward
 	 compatibility only, so that `tar cfT archive /dev/null will
 	 succeed */
diff --git a/tests/Makefile.am b/tests/Makefile.am
index 6684d1d..c71d294 100644
--- a/tests/Makefile.am
+++ b/tests/Makefile.am
@@ -43,6 +43,8 @@ $(srcdir)/package.m4: $(top_srcdir)/configure.ac
 
 TESTSUITE_AT = \
  T-cd.at\
+ T-dir00.at\
+ T-dir01.at\
  T-empty.at\
  T-null.at\
  T-rec.at\
diff --git a/tests/T-dir00.at b/tests/T-dir00.at
new file mode 100644
index 0000000..7f89fcf
--- /dev/null
+++ b/tests/T-dir00.at
@@ -0,0 +1,45 @@
+# Process this file with autom4te to create testsuite. -*- Autotest -*-
+#
+# Test suite for GNU tar.
+# Copyright 2014 Free Software Foundation, Inc.
+
+# This file is part of GNU tar.
+
+# GNU tar is free software; you can redistribute it and/or modify
+# it under the terms of the GNU General Public License as published by
+# the Free Software Foundation; either version 3 of the License, or
+# (at your option) any later version.
+
+# GNU tar is distributed in the hope that it will be useful,
+# but WITHOUT ANY WARRANTY; without even the implied warranty of
+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+# GNU General Public License for more details.
+
+# You should have received a copy of the GNU General Public License
+# along with this program.  If not, see <http://www.gnu.org/licenses/>.
+
+# Tar 1.27 and 1.28 did not extract files under directory memberes listed
+# in the file read by --file-from.
+#
+# Reported-by: Jean-Louis Martineau <martineau@zmanda.com>
+# References: <541AE02C.2050008@zmanda.com>,
+#             http://lists.gnu.org/archive/html/bug-tar/2014-09/msg00006.html
+
+AT_SETUP([recursive extraction from --files-from])
+AT_KEYWORDS([files-from extract T-dir T-dir00])
+AT_TAR_CHECK([
+mkdir dir
+genfile -f dir/file1
+genfile -f dir/file2
+tar cf archive dir
+rm -rf dir
+echo dir > list
+tar xfTv archive list
+],
+[0],
+[dir/
+dir/file1
+dir/file2
+])
+AT_CLEANUP
+
diff --git a/tests/T-dir01.at b/tests/T-dir01.at
new file mode 100644
index 0000000..155a373
--- /dev/null
+++ b/tests/T-dir01.at
@@ -0,0 +1,45 @@
+# Process this file with autom4te to create testsuite. -*- Autotest -*-
+#
+# Test suite for GNU tar.
+# Copyright 2014 Free Software Foundation, Inc.
+
+# This file is part of GNU tar.
+
+# GNU tar is free software; you can redistribute it and/or modify
+# it under the terms of the GNU General Public License as published by
+# the Free Software Foundation; either version 3 of the License, or
+# (at your option) any later version.
+
+# GNU tar is distributed in the hope that it will be useful,
+# but WITHOUT ANY WARRANTY; without even the implied warranty of
+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+# GNU General Public License for more details.
+
+# You should have received a copy of the GNU General Public License
+# along with this program.  If not, see <http://www.gnu.org/licenses/>.
+
+# Tar 1.27 and 1.28 did not remove trailing slashes from file names
+# obtained with the --file-from option.
+#
+# Reported-by: Jean-Louis Martineau <martineau@zmanda.com>
+# References: <541AE02C.2050008@zmanda.com>,
+#             http://lists.gnu.org/archive/html/bug-tar/2014-09/msg00006.html
+
+AT_SETUP([trailing slash in --files-from])
+AT_KEYWORDS([files-from extract T-dir T-dir01])
+AT_TAR_CHECK([
+mkdir dir
+genfile -f dir/file1
+genfile -f dir/file2
+tar cf archive dir
+rm -rf dir
+echo dir/ > list
+tar xfTv archive list
+],
+[0],
+[dir/
+dir/file1
+dir/file2
+])
+AT_CLEANUP
+
diff --git a/tests/testsuite.at b/tests/testsuite.at
index 7f8e4c4..f28e86c 100644
--- a/tests/testsuite.at
+++ b/tests/testsuite.at
@@ -205,6 +205,8 @@ m4_include([T-empty.at])
 m4_include([T-null.at])
 m4_include([T-zfile.at])
 m4_include([T-nonl.at])
+m4_include([T-dir00.at])
+m4_include([T-dir01.at])
 
 AT_BANNER([Various options])
 m4_include([indexfile.at])
-- 
1.7.12.1



From MAILER-DAEMON Fri Sep 19 07:29:39 2014
Received: from list by lists.gnu.org with archive (Exim 4.71)
	id 1XUwNf-0003eh-QW
	for mharc-bug-tar@gnu.org; Fri, 19 Sep 2014 07:29:39 -0400
Received: from eggs.gnu.org ([2001:4830:134:3::10]:35352)
	by lists.gnu.org with esmtp (Exim 4.71)
	(envelope-from <martineau@zmanda.com>) id 1XUwNZ-0003dQ-PR
	for bug-tar@gnu.org; Fri, 19 Sep 2014 07:29:38 -0400
Received: from Debian-exim by eggs.gnu.org with spam-scanned (Exim 4.71)
	(envelope-from <martineau@zmanda.com>) id 1XUwNV-0000gX-Ks
	for bug-tar@gnu.org; Fri, 19 Sep 2014 07:29:33 -0400
Received: from smtp136.ord.emailsrvr.com ([173.203.6.136]:58835)
	by eggs.gnu.org with esmtp (Exim 4.71)
	(envelope-from <martineau@zmanda.com>) id 1XUwNV-0000gH-Ex
	for bug-tar@gnu.org; Fri, 19 Sep 2014 07:29:29 -0400
Received: from localhost (localhost.localdomain [127.0.0.1])
	by smtp10.relay.ord1a.emailsrvr.com (SMTP Server) with ESMTP id
	D8A3D1800AF
	for <bug-tar@gnu.org>; Fri, 19 Sep 2014 07:29:23 -0400 (EDT)
X-Virus-Scanned: OK
Received: by smtp10.relay.ord1a.emailsrvr.com (Authenticated sender:
	martineau-AT-zmanda.com) with ESMTPSA id 9B4131800A0
	for <bug-tar@gnu.org>; Fri, 19 Sep 2014 07:29:23 -0400 (EDT)
X-Sender-Id: martineau@zmanda.com
Received: from localhost.localdomain (modemcable022.253-203-24.mc.videotron.ca
	[24.203.253.22]) (using TLSv1 with cipher DHE-RSA-CAMELLIA256-SHA)
	by 0.0.0.0:465 (trex/5.2.10); Fri, 19 Sep 2014 11:29:23 GMT
Message-ID: <541C1393.6000409@zmanda.com>
Date: Fri, 19 Sep 2014 07:29:23 -0400
From: Jean-Louis Martineau <martineau@zmanda.com>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:17.0) Gecko/20130110 Thunderbird/17.0.2
MIME-Version: 1.0
To: bug-tar@gnu.org
References: <541AE02C.2050008@zmanda.com>
	<20140918180248.6251@ulysses.gnu.org.ua>
	<541AFB3E.2060102@zmanda.com>
	<20140918225720.25894@ulysses.gnu.org.ua>
In-Reply-To: <20140918225720.25894@ulysses.gnu.org.ua>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-detected-operating-system: by eggs.gnu.org: GNU/Linux 2.6.x
X-Received-From: 173.203.6.136
Subject: Re: [Bug-tar] --files-from and recursive extract (behavior change
 in 1.27)
X-BeenThere: bug-tar@gnu.org
X-Mailman-Version: 2.1.14
Precedence: list
List-Id: Bug reports for GNU Tar <bug-tar.gnu.org>
List-Unsubscribe: <https://lists.gnu.org/mailman/options/bug-tar>,
	<mailto:bug-tar-request@gnu.org?subject=unsubscribe>
List-Archive: <http://lists.gnu.org/archive/html/bug-tar>
List-Post: <mailto:bug-tar@gnu.org>
List-Help: <mailto:bug-tar-request@gnu.org?subject=help>
List-Subscribe: <https://lists.gnu.org/mailman/listinfo/bug-tar>,
	<mailto:bug-tar-request@gnu.org?subject=subscribe>
X-List-Received-Date: Fri, 19 Sep 2014 11:29:38 -0000

Thanks Sergey for the fast fix.

Both issues are fixed.

Jean-Louis

On 09/18/2014 03:57 PM, Sergey Poznyakoff wrote:
>> The patch fix the first issue I reported, but not the second.
> Yes, indeed.  I have installed the following patch instead, which
> fixes both issues.
>
> Regards,
> Sergey
>
> * src/common.h (name_add_file): Change signature.
> * src/names.c (name_elt_alloc_matflags): New function.
> (name_add_name): Use name_elt_alloc_matflags.
> (name_add_file): Take matching flags as third argument.
> (read_next_name): Remove trailing slashes.
> * src/tar.c (parse_opt): Pass matching_flags to name_add_file.
>
> * tests/T-dir00.at: New file.
> * tests/T-dir01.at: New file.
> * tests/Makefile.am: Add new testcases.
> * tests/testsuite.at: Likewise.
> ---
>   src/common.h       |  2 +-
>   src/names.c        | 56 ++++++++++++++++++++++++++++++++++--------------------
>   src/tar.c          |  2 +-
>   tests/Makefile.am  |  2 ++
>   tests/T-dir00.at   | 45 +++++++++++++++++++++++++++++++++++++++++++
>   tests/T-dir01.at   | 45 +++++++++++++++++++++++++++++++++++++++++++
>   tests/testsuite.at |  2 ++
>   7 files changed, 131 insertions(+), 23 deletions(-)
>   create mode 100644 tests/T-dir00.at
>   create mode 100644 tests/T-dir01.at
>
> diff --git a/src/common.h b/src/common.h
> index edf787c..3cc2011 100644
> --- a/src/common.h
> +++ b/src/common.h
> @@ -725,7 +725,7 @@ int uname_to_uid (char const *uname, uid_t *puid);
>   void name_init (void);
>   void name_add_name (const char *name, int matching_flags);
>   void name_add_dir (const char *name);
> -void name_add_file (const char *name, int term);
> +void name_add_file (const char *name, int term, int matching_flags);
>   void name_term (void);
>   const char *name_next (int change_dirs);
>   void name_gather (void);
> diff --git a/src/names.c b/src/names.c
> index 594e7fd..e3e145a 100644
> --- a/src/names.c
> +++ b/src/names.c
> @@ -258,6 +258,21 @@ name_elt_alloc (void)
>     return elt;
>   }
>   
> +static struct name_elt *
> +name_elt_alloc_matflags (int matflags)
> +{
> +  static int prev_flags = 0; /* FIXME: Or EXCLUDE_ANCHORED? */
> +  struct name_elt *ep = name_elt_alloc ();
> +  if (prev_flags != matflags)
> +    {
> +      ep->type = NELT_FMASK;
> +      ep->v.matching_flags = matflags;
> +      prev_flags = matflags;
> +      ep = name_elt_alloc ();
> +    }
> +  return ep;
> +}
> +
>   static void
>   name_list_adjust (void)
>   {
> @@ -276,20 +291,13 @@ name_list_advance (void)
>     free (elt);
>   }
>   
> -/* Add to name_array the file NAME with fnmatch options MATCHING_FLAGS */
> +
> +/* Add to name_array the file NAME with fnmatch options MATFLAGS */
>   void
> -name_add_name (const char *name, int matching_flags)
> +name_add_name (const char *name, int matflags)
>   {
> -  static int prev_flags = 0; /* FIXME: Or EXCLUDE_ANCHORED? */
> -  struct name_elt *ep = name_elt_alloc ();
> +  struct name_elt *ep = name_elt_alloc_matflags (matflags);
>   
> -  if (prev_flags != matching_flags)
> -    {
> -      ep->type = NELT_FMASK;
> -      ep->v.matching_flags = matching_flags;
> -      prev_flags = matching_flags;
> -      ep = name_elt_alloc ();
> -    }
>     ep->type = NELT_NAME;
>     ep->v.name = name;
>     name_count++;
> @@ -305,9 +313,10 @@ name_add_dir (const char *name)
>   }
>   
>   void
> -name_add_file (const char *name, int term)
> +name_add_file (const char *name, int term, int matflags)
>   {
> -  struct name_elt *ep = name_elt_alloc ();
> +  struct name_elt *ep = name_elt_alloc_matflags (matflags);
> +
>     ep->type = NELT_FILE;
>     ep->v.file.name = name;
>     ep->v.file.term = term;
> @@ -389,6 +398,15 @@ add_file_id (const char *filename)
>     file_id_list = p;
>     return 0;
>   }
> +
> +/* Chop trailing slashes.  */
> +static void
> +chopslash (char *str)
> +{
> +  char *p = str + strlen (str) - 1;
> +  while (p > str && ISSLASH (*p))
> +    *p-- = '\0';
> +}
>   
>   enum read_file_list_state  /* Result of reading file name from the list file */
>     {
> @@ -428,7 +446,7 @@ read_name_from_file (struct name_elt *ent)
>     if (counter == name_buffer_length)
>       name_buffer = x2realloc (name_buffer, &name_buffer_length);
>     name_buffer[counter] = 0;
> -
> +  chopslash (name_buffer);
>     return (counter == 0 && c == EOF) ? file_list_end : file_list_success;
>   }
>   
> @@ -518,7 +536,6 @@ copy_name (struct name_elt *ep)
>   {
>     const char *source;
>     size_t source_len;
> -  char *cursor;
>   
>     source = ep->v.name;
>     source_len = strlen (source);
> @@ -536,11 +553,7 @@ copy_name (struct name_elt *ep)
>         name_buffer = xmalloc(name_buffer_length + 2);
>       }
>     strcpy (name_buffer, source);
> -
> -  /* Zap trailing slashes.  */
> -  cursor = name_buffer + strlen (name_buffer) - 1;
> -  while (cursor > name_buffer && ISSLASH (*cursor))
> -    *cursor-- = '\0';
> +  chopslash (name_buffer);
>   }
>   
>   
> @@ -553,7 +566,8 @@ static int matching_flags; /* exclude_fnmatch options */
>      the request to change to the given directory.
>   
>      Entries of type NELT_FMASK cause updates of the matching_flags
> -   value. */
> +   value.
> +*/
>   static struct name_elt *
>   name_next_elt (int change_dirs)
>   {
> diff --git a/src/tar.c b/src/tar.c
> index cd32379..225c624 100644
> --- a/src/tar.c
> +++ b/src/tar.c
> @@ -1641,7 +1641,7 @@ parse_opt (int key, char *arg, struct argp_state *state)
>         break;
>   
>       case 'T':
> -      name_add_file (arg, filename_terminator);
> +      name_add_file (arg, filename_terminator, MAKE_INCL_OPTIONS (args));
>         /* Indicate we've been given -T option. This is for backward
>   	 compatibility only, so that `tar cfT archive /dev/null will
>   	 succeed */
> diff --git a/tests/Makefile.am b/tests/Makefile.am
> index 6684d1d..c71d294 100644
> --- a/tests/Makefile.am
> +++ b/tests/Makefile.am
> @@ -43,6 +43,8 @@ $(srcdir)/package.m4: $(top_srcdir)/configure.ac
>   
>   TESTSUITE_AT = \
>    T-cd.at\
> + T-dir00.at\
> + T-dir01.at\
>    T-empty.at\
>    T-null.at\
>    T-rec.at\
> diff --git a/tests/T-dir00.at b/tests/T-dir00.at
> new file mode 100644
> index 0000000..7f89fcf
> --- /dev/null
> +++ b/tests/T-dir00.at
> @@ -0,0 +1,45 @@
> +# Process this file with autom4te to create testsuite. -*- Autotest -*-
> +#
> +# Test suite for GNU tar.
> +# Copyright 2014 Free Software Foundation, Inc.
> +
> +# This file is part of GNU tar.
> +
> +# GNU tar is free software; you can redistribute it and/or modify
> +# it under the terms of the GNU General Public License as published by
> +# the Free Software Foundation; either version 3 of the License, or
> +# (at your option) any later version.
> +
> +# GNU tar is distributed in the hope that it will be useful,
> +# but WITHOUT ANY WARRANTY; without even the implied warranty of
> +# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
> +# GNU General Public License for more details.
> +
> +# You should have received a copy of the GNU General Public License
> +# along with this program.  If not, see <http://www.gnu.org/licenses/>.
> +
> +# Tar 1.27 and 1.28 did not extract files under directory memberes listed
> +# in the file read by --file-from.
> +#
> +# Reported-by: Jean-Louis Martineau <martineau@zmanda.com>
> +# References: <541AE02C.2050008@zmanda.com>,
> +#             http://lists.gnu.org/archive/html/bug-tar/2014-09/msg00006.html
> +
> +AT_SETUP([recursive extraction from --files-from])
> +AT_KEYWORDS([files-from extract T-dir T-dir00])
> +AT_TAR_CHECK([
> +mkdir dir
> +genfile -f dir/file1
> +genfile -f dir/file2
> +tar cf archive dir
> +rm -rf dir
> +echo dir > list
> +tar xfTv archive list
> +],
> +[0],
> +[dir/
> +dir/file1
> +dir/file2
> +])
> +AT_CLEANUP
> +
> diff --git a/tests/T-dir01.at b/tests/T-dir01.at
> new file mode 100644
> index 0000000..155a373
> --- /dev/null
> +++ b/tests/T-dir01.at
> @@ -0,0 +1,45 @@
> +# Process this file with autom4te to create testsuite. -*- Autotest -*-
> +#
> +# Test suite for GNU tar.
> +# Copyright 2014 Free Software Foundation, Inc.
> +
> +# This file is part of GNU tar.
> +
> +# GNU tar is free software; you can redistribute it and/or modify
> +# it under the terms of the GNU General Public License as published by
> +# the Free Software Foundation; either version 3 of the License, or
> +# (at your option) any later version.
> +
> +# GNU tar is distributed in the hope that it will be useful,
> +# but WITHOUT ANY WARRANTY; without even the implied warranty of
> +# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
> +# GNU General Public License for more details.
> +
> +# You should have received a copy of the GNU General Public License
> +# along with this program.  If not, see <http://www.gnu.org/licenses/>.
> +
> +# Tar 1.27 and 1.28 did not remove trailing slashes from file names
> +# obtained with the --file-from option.
> +#
> +# Reported-by: Jean-Louis Martineau <martineau@zmanda.com>
> +# References: <541AE02C.2050008@zmanda.com>,
> +#             http://lists.gnu.org/archive/html/bug-tar/2014-09/msg00006.html
> +
> +AT_SETUP([trailing slash in --files-from])
> +AT_KEYWORDS([files-from extract T-dir T-dir01])
> +AT_TAR_CHECK([
> +mkdir dir
> +genfile -f dir/file1
> +genfile -f dir/file2
> +tar cf archive dir
> +rm -rf dir
> +echo dir/ > list
> +tar xfTv archive list
> +],
> +[0],
> +[dir/
> +dir/file1
> +dir/file2
> +])
> +AT_CLEANUP
> +
> diff --git a/tests/testsuite.at b/tests/testsuite.at
> index 7f8e4c4..f28e86c 100644
> --- a/tests/testsuite.at
> +++ b/tests/testsuite.at
> @@ -205,6 +205,8 @@ m4_include([T-empty.at])
>   m4_include([T-null.at])
>   m4_include([T-zfile.at])
>   m4_include([T-nonl.at])
> +m4_include([T-dir00.at])
> +m4_include([T-dir01.at])
>   
>   AT_BANNER([Various options])
>   m4_include([indexfile.at])



From MAILER-DAEMON Mon Sep 22 08:28:06 2014
Received: from list by lists.gnu.org with archive (Exim 4.71)
	id 1XW2ir-0002Sv-Mx
	for mharc-bug-tar@gnu.org; Mon, 22 Sep 2014 08:28:05 -0400
Received: from eggs.gnu.org ([2001:4830:134:3::10]:54507)
	by lists.gnu.org with esmtp (Exim 4.71)
	(envelope-from <komh78@gmail.com>) id 1XVzJV-0006pV-V1
	for bug-tar@gnu.org; Mon, 22 Sep 2014 04:49:51 -0400
Received: from Debian-exim by eggs.gnu.org with spam-scanned (Exim 4.71)
	(envelope-from <komh78@gmail.com>) id 1XVzJM-0002KP-VA
	for bug-tar@gnu.org; Mon, 22 Sep 2014 04:49:41 -0400
Received: from mail-pa0-x232.google.com ([2607:f8b0:400e:c03::232]:58353)
	by eggs.gnu.org with esmtp (Exim 4.71)
	(envelope-from <komh78@gmail.com>) id 1XVzJM-0002Jt-OS
	for bug-tar@gnu.org; Mon, 22 Sep 2014 04:49:32 -0400
Received: by mail-pa0-f50.google.com with SMTP id rd3so2752777pab.9
	for <bug-tar@gnu.org>; Mon, 22 Sep 2014 01:49:26 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
	h=from:to:subject:date:message-id;
	bh=ivu2sFJ82VhwUfYeE5beM9UjN1WBjJlArowOdF4Y9us=;
	b=gqMm5W45qt5lnxUisNz7K0BU+9K7YoaoG/FT9By24XrVD/j0Lz+NeO2hm1WVUy0s/w
	wcdUQPM8FHAzG/lUiJEc6Bx5/vt7XtMKsgue3WNy2KcitUTnN6GLtxTxUPNrkPSjcC4n
	0p4Vflok1ymQw+XhZryrK6EgUdDdJt69VmCPP1PSlD6nx91e2O3f98e5Wxq591MNAfcu
	Obqst1Dxif0L5RvCBUd699MNwZGP5omDXbqNGXPc6GP6xFkaL4a9IorVxKn8kc+Vv8XU
	8p2ZeN7KseWqXdmAZFlkUdDvDwHaslSIRJkuipu8/7eWBzrSYvBBvtM3RJ7mYE0+KPpx
	i0LQ==
X-Received: by 10.70.3.194 with SMTP id e2mr1819064pde.161.1411375766586;
	Mon, 22 Sep 2014 01:49:26 -0700 (PDT)
Received: from localhost.localdomain ([218.39.32.71])
	by mx.google.com with ESMTPSA id l4sm8686380pdp.66.2014.09.22.01.49.24
	for <bug-tar@gnu.org> (version=TLSv1 cipher=RC4-SHA bits=128/128);
	Mon, 22 Sep 2014 01:49:25 -0700 (PDT)
From: KO Myung-Hun <komh78@gmail.com>
X-Google-Original-From: KO Myung-Hun <komh@chollian.net>
To: bug-tar@gnu.org
Date: Mon, 22 Sep 2014 17:49:16 +0900
Message-Id: <1411375759-20227-1-git-send-email-komh@chollian.net>
X-Mailer: git-send-email 1.7.3.2
X-detected-operating-system: by eggs.gnu.org: Error: Malformed IPv6 address
	(bad octet value).
X-Received-From: 2607:f8b0:400e:c03::232
X-Mailman-Approved-At: Mon, 22 Sep 2014 08:28:03 -0400
Subject: [Bug-tar] [PATCH] OS/2 patches
X-BeenThere: bug-tar@gnu.org
X-Mailman-Version: 2.1.14
Precedence: list
List-Id: Bug reports for GNU Tar <bug-tar.gnu.org>
List-Unsubscribe: <https://lists.gnu.org/mailman/options/bug-tar>,
	<mailto:bug-tar-request@gnu.org?subject=unsubscribe>
List-Archive: <http://lists.gnu.org/archive/html/bug-tar>
List-Post: <mailto:bug-tar@gnu.org>
List-Help: <mailto:bug-tar-request@gnu.org?subject=help>
List-Subscribe: <https://lists.gnu.org/mailman/listinfo/bug-tar>,
	<mailto:bug-tar-request@gnu.org?subject=subscribe>
X-List-Received-Date: Mon, 22 Sep 2014 08:49:51 -0000

Hi/2.

These are OS/2 patches.

Review, please...


From MAILER-DAEMON Mon Sep 22 08:28:06 2014
Received: from list by lists.gnu.org with archive (Exim 4.71)
	id 1XW2is-0002UW-IS
	for mharc-bug-tar@gnu.org; Mon, 22 Sep 2014 08:28:06 -0400
Received: from eggs.gnu.org ([2001:4830:134:3::10]:54536)
	by lists.gnu.org with esmtp (Exim 4.71)
	(envelope-from <komh78@gmail.com>) id 1XVzJa-0006qL-OP
	for bug-tar@gnu.org; Mon, 22 Sep 2014 04:49:55 -0400
Received: from Debian-exim by eggs.gnu.org with spam-scanned (Exim 4.71)
	(envelope-from <komh78@gmail.com>) id 1XVzJR-0002Ky-IS
	for bug-tar@gnu.org; Mon, 22 Sep 2014 04:49:46 -0400
Received: from mail-pd0-x231.google.com ([2607:f8b0:400e:c02::231]:42903)
	by eggs.gnu.org with esmtp (Exim 4.71)
	(envelope-from <komh78@gmail.com>) id 1XVzJR-0002K9-BP
	for bug-tar@gnu.org; Mon, 22 Sep 2014 04:49:37 -0400
Received: by mail-pd0-f177.google.com with SMTP id v10so2215330pde.8
	for <bug-tar@gnu.org>; Mon, 22 Sep 2014 01:49:31 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
	h=from:to:subject:date:message-id:in-reply-to:references;
	bh=YR68A87NrhS+m8cSQAUTvkTeRM9+uK+OH8sft5/YlUA=;
	b=gCQlHChfCDE8yi9yqtIrAnhhIcSnkQOA4xptOnrcQLumoqQqjJnARoKsJ5D1yrDyO0
	x3t37bFvM22LTYdNBYSobcY+A9EhFA0kR+U0ya39bE5nhkykGVduz9xaWkGjebvUH8K2
	u3wPzZ9GyGfl2I2eVLkAomBeRyJBTFx16BN/ah9g5I6NyjG21rWPxmjAbWdX1doqup/N
	Bw4s/rlNQuCcZ4lmX/EtlapXGBFPevTfKiMp9RRaJi5kfFAm4vmaSUrB5yMBFhdkqAFV
	fLAvyxqqjyzkfqClH00u19qUty8LQbj0KQaTjjNE38RZ9cND1/hgvdJZsE253EQTssGq
	Ep2g==
X-Received: by 10.70.95.138 with SMTP id dk10mr27571892pdb.66.1411375771347;
	Mon, 22 Sep 2014 01:49:31 -0700 (PDT)
Received: from localhost.localdomain ([218.39.32.71])
	by mx.google.com with ESMTPSA id l4sm8686380pdp.66.2014.09.22.01.49.29
	for <bug-tar@gnu.org> (version=TLSv1 cipher=RC4-SHA bits=128/128);
	Mon, 22 Sep 2014 01:49:30 -0700 (PDT)
From: KO Myung-Hun <komh78@gmail.com>
X-Google-Original-From: KO Myung-Hun <komh@chollian.net>
To: bug-tar@gnu.org
Date: Mon, 22 Sep 2014 17:49:18 +0900
Message-Id: <1411375759-20227-3-git-send-email-komh@chollian.net>
X-Mailer: git-send-email 1.7.3.2
In-Reply-To: <1411375759-20227-1-git-send-email-komh@chollian.net>
References: <1411375759-20227-1-git-send-email-komh@chollian.net>
X-detected-operating-system: by eggs.gnu.org: Error: Malformed IPv6 address
	(bad octet value).
X-Received-From: 2607:f8b0:400e:c02::231
X-Mailman-Approved-At: Mon, 22 Sep 2014 08:28:03 -0400
Subject: [Bug-tar] [PATCH 2/3] tar: set stdin/stdout to binary mode on OS/2
	if they are not console
X-BeenThere: bug-tar@gnu.org
X-Mailman-Version: 2.1.14
Precedence: list
List-Id: Bug reports for GNU Tar <bug-tar.gnu.org>
List-Unsubscribe: <https://lists.gnu.org/mailman/options/bug-tar>,
	<mailto:bug-tar-request@gnu.org?subject=unsubscribe>
List-Archive: <http://lists.gnu.org/archive/html/bug-tar>
List-Post: <mailto:bug-tar@gnu.org>
List-Help: <mailto:bug-tar-request@gnu.org?subject=help>
List-Subscribe: <https://lists.gnu.org/mailman/listinfo/bug-tar>,
	<mailto:bug-tar-request@gnu.org?subject=subscribe>
X-List-Received-Date: Mon, 22 Sep 2014 08:49:55 -0000

* src/tar.c: Include io.h for setmode().
  (main): Subject.
---
 src/tar.c |   13 +++++++++++++
 1 files changed, 13 insertions(+), 0 deletions(-)

diff --git a/src/tar.c b/src/tar.c
index 283b1ae..059a042 100644
--- a/src/tar.c
+++ b/src/tar.c
@@ -53,6 +53,10 @@
 #include <priv-set.h>
 #include <savedir.h>
 
+#ifdef __OS2__
+# include <io.h>    /* setmode() */
+#endif
+
 /* Local declarations.  */
 
 #ifndef DEFAULT_ARCHIVE_FORMAT
@@ -2739,6 +2743,15 @@ main (int argc, char **argv)
   /* Make sure we have first three descriptors available */
   stdopen ();
 
+#ifdef __OS2__
+  /* Set stdin/out to binary mode if it is not a console */
+  if (!isatty (fileno (stdin)))
+    setmode (fileno (stdin), O_BINARY);
+
+  if (!isatty (fileno (stdout)))
+    setmode (fileno (stdout), O_BINARY);
+#endif
+
   /* Pre-allocate a few structures.  */
 
   allocated_archive_names = 10;
-- 
1.7.3.2



From MAILER-DAEMON Mon Sep 22 08:28:06 2014
Received: from list by lists.gnu.org with archive (Exim 4.71)
	id 1XW2ir-0002TE-TJ
	for mharc-bug-tar@gnu.org; Mon, 22 Sep 2014 08:28:06 -0400
Received: from eggs.gnu.org ([2001:4830:134:3::10]:54525)
	by lists.gnu.org with esmtp (Exim 4.71)
	(envelope-from <komh78@gmail.com>) id 1XVzJY-0006pi-3P
	for bug-tar@gnu.org; Mon, 22 Sep 2014 04:49:53 -0400
Received: from Debian-exim by eggs.gnu.org with spam-scanned (Exim 4.71)
	(envelope-from <komh78@gmail.com>) id 1XVzJP-0002Kd-2Z
	for bug-tar@gnu.org; Mon, 22 Sep 2014 04:49:44 -0400
Received: from mail-pa0-x230.google.com ([2607:f8b0:400e:c03::230]:35482)
	by eggs.gnu.org with esmtp (Exim 4.71)
	(envelope-from <komh78@gmail.com>) id 1XVzJO-0002K4-S8
	for bug-tar@gnu.org; Mon, 22 Sep 2014 04:49:35 -0400
Received: by mail-pa0-f48.google.com with SMTP id ey11so4616244pad.21
	for <bug-tar@gnu.org>; Mon, 22 Sep 2014 01:49:28 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
	h=from:to:subject:date:message-id:in-reply-to:references;
	bh=5lsFmsPBbm7KOMt1T3r3CDMvf3zlXN00Xu3eunjOoEc=;
	b=uPN6C4QPVqqozTAUoQExWensxo3WltFeY2mlTB9nK4wd8JIX7Bhp681oWkehoV0tqV
	rvemaNMBq8vBIYO0qxVtb3ydES6RM5s6e9uPaAIB2THwkUUQZdBEZkNt1SVI1rgBoyvk
	TmqJW9neiRftyhJrmmjJpmJeIOx6tN3UrbfwOxrNje5sxriaTF1Tb+df+0yqTjB2WQtC
	7/v6i5sW684Nbgxh97//Tp7/Ibt5WWHHFdVQwZbniJ3SqL3H/eO7AH04xWunSHmX/Kw1
	RE9F5CRG8SMsZJMXfbMKtrk+3a5k5rnKl0wc3Ue8D6pEfljh+lI7cI8gNTF/j+I8WSvm
	YBsg==
X-Received: by 10.68.215.67 with SMTP id og3mr22692653pbc.30.1411375768935;
	Mon, 22 Sep 2014 01:49:28 -0700 (PDT)
Received: from localhost.localdomain ([218.39.32.71])
	by mx.google.com with ESMTPSA id l4sm8686380pdp.66.2014.09.22.01.49.26
	for <bug-tar@gnu.org> (version=TLSv1 cipher=RC4-SHA bits=128/128);
	Mon, 22 Sep 2014 01:49:28 -0700 (PDT)
From: KO Myung-Hun <komh78@gmail.com>
X-Google-Original-From: KO Myung-Hun <komh@chollian.net>
To: bug-tar@gnu.org
Date: Mon, 22 Sep 2014 17:49:17 +0900
Message-Id: <1411375759-20227-2-git-send-email-komh@chollian.net>
X-Mailer: git-send-email 1.7.3.2
In-Reply-To: <1411375759-20227-1-git-send-email-komh@chollian.net>
References: <1411375759-20227-1-git-send-email-komh@chollian.net>
X-detected-operating-system: by eggs.gnu.org: Error: Malformed IPv6 address
	(bad octet value).
X-Received-From: 2607:f8b0:400e:c03::230
X-Mailman-Approved-At: Mon, 22 Sep 2014 08:28:03 -0400
Subject: [Bug-tar] [PATCH 1/3] tar: set force_local_option to true on OS/2
X-BeenThere: bug-tar@gnu.org
X-Mailman-Version: 2.1.14
Precedence: list
List-Id: Bug reports for GNU Tar <bug-tar.gnu.org>
List-Unsubscribe: <https://lists.gnu.org/mailman/options/bug-tar>,
	<mailto:bug-tar-request@gnu.org?subject=unsubscribe>
List-Archive: <http://lists.gnu.org/archive/html/bug-tar>
List-Post: <mailto:bug-tar@gnu.org>
List-Help: <mailto:bug-tar-request@gnu.org?subject=help>
List-Subscribe: <https://lists.gnu.org/mailman/listinfo/bug-tar>,
	<mailto:bug-tar-request@gnu.org?subject=subscribe>
X-List-Received-Date: Mon, 22 Sep 2014 08:49:53 -0000

On OS/2, colon is used to specify a drive name.

* src/tar.c (parse_opt): Subject.
---
 src/tar.c |    4 ++++
 1 files changed, 4 insertions(+), 0 deletions(-)

diff --git a/src/tar.c b/src/tar.c
index cd32379..283b1ae 100644
--- a/src/tar.c
+++ b/src/tar.c
@@ -1358,6 +1358,10 @@ parse_opt (int key, char *arg, struct argp_state *state)
 {
   struct tar_args *args = state->input;
 
+#ifdef __OS2__
+    force_local_option = true;
+#endif
+
   switch (key)
     {
     case ARGP_KEY_ARG:
-- 
1.7.3.2



From MAILER-DAEMON Mon Sep 22 08:28:06 2014
Received: from list by lists.gnu.org with archive (Exim 4.71)
	id 1XW2is-0002VE-Qd
	for mharc-bug-tar@gnu.org; Mon, 22 Sep 2014 08:28:06 -0400
Received: from eggs.gnu.org ([2001:4830:134:3::10]:54571)
	by lists.gnu.org with esmtp (Exim 4.71)
	(envelope-from <komh78@gmail.com>) id 1XVzJh-0006rA-D7
	for bug-tar@gnu.org; Mon, 22 Sep 2014 04:50:02 -0400
Received: from Debian-exim by eggs.gnu.org with spam-scanned (Exim 4.71)
	(envelope-from <komh78@gmail.com>) id 1XVzJU-0002LH-33
	for bug-tar@gnu.org; Mon, 22 Sep 2014 04:49:53 -0400
Received: from mail-pa0-x236.google.com ([2607:f8b0:400e:c03::236]:45744)
	by eggs.gnu.org with esmtp (Exim 4.71)
	(envelope-from <komh78@gmail.com>) id 1XVzJT-0002KZ-Sd
	for bug-tar@gnu.org; Mon, 22 Sep 2014 04:49:40 -0400
Received: by mail-pa0-f54.google.com with SMTP id fb1so4126686pad.41
	for <bug-tar@gnu.org>; Mon, 22 Sep 2014 01:49:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
	h=from:to:subject:date:message-id:in-reply-to:references;
	bh=I5dpkq5ZLznt5viuOOEnDbOi0PmOfQLNRHUyKO9HwIg=;
	b=BDnMkMmWC9A6r7Uy+XCX2jSJCEy9kEEBYAMDbD/UB/eE/fDlFej7I0qCNGujkdECPw
	xQE8UlfY01P97a2L++jcBwwhn1u9c5DmI3XwEPjpMcUCEyVWxMTUT7sWt/5w9ZTID+pt
	kyq7iG0E5IT4DUtCZ7HjMi25xinnqr7xGXrb/XmuDrlsIRbwGPv4jtVCpuq4xnUK9ZE7
	VvMfMwEop7NMAERNklx/oIbsqMOBRcgGNqD4RjFB6Ey795/73oPcEf2tXCHX+2QiypjV
	91FtcJZye45fAyReSreXeaYdJlGzr/j45nzpDxNtvMfyWQFeEynETgtJp2IEOEEMJGjD
	ErxQ==
X-Received: by 10.70.103.145 with SMTP id fw17mr1895403pdb.169.1411375773695; 
	Mon, 22 Sep 2014 01:49:33 -0700 (PDT)
Received: from localhost.localdomain ([218.39.32.71])
	by mx.google.com with ESMTPSA id l4sm8686380pdp.66.2014.09.22.01.49.31
	for <bug-tar@gnu.org> (version=TLSv1 cipher=RC4-SHA bits=128/128);
	Mon, 22 Sep 2014 01:49:32 -0700 (PDT)
From: KO Myung-Hun <komh78@gmail.com>
X-Google-Original-From: KO Myung-Hun <komh@chollian.net>
To: bug-tar@gnu.org
Date: Mon, 22 Sep 2014 17:49:19 +0900
Message-Id: <1411375759-20227-4-git-send-email-komh@chollian.net>
X-Mailer: git-send-email 1.7.3.2
In-Reply-To: <1411375759-20227-1-git-send-email-komh@chollian.net>
References: <1411375759-20227-1-git-send-email-komh@chollian.net>
X-detected-operating-system: by eggs.gnu.org: Error: Malformed IPv6 address
	(bad octet value).
X-Received-From: 2607:f8b0:400e:c03::236
X-Mailman-Approved-At: Mon, 22 Sep 2014 08:28:03 -0400
Subject: [Bug-tar] [PATCH 3/3] tar: fix build failure
X-BeenThere: bug-tar@gnu.org
X-Mailman-Version: 2.1.14
Precedence: list
List-Id: Bug reports for GNU Tar <bug-tar.gnu.org>
List-Unsubscribe: <https://lists.gnu.org/mailman/options/bug-tar>,
	<mailto:bug-tar-request@gnu.org?subject=unsubscribe>
List-Archive: <http://lists.gnu.org/archive/html/bug-tar>
List-Post: <mailto:bug-tar@gnu.org>
List-Help: <mailto:bug-tar-request@gnu.org?subject=help>
List-Subscribe: <https://lists.gnu.org/mailman/listinfo/bug-tar>,
	<mailto:bug-tar-request@gnu.org?subject=subscribe>
X-List-Received-Date: Mon, 22 Sep 2014 08:50:02 -0000

* src/tar.c: Guard inode feature with D_INO_IN_DIRENT.

-----
  CC       tar.o
tar.c:1356: error: `SAVEDIR_SORT_INODE' undeclared here (not in a function)
tar.c:1356: error: initializer element is not constant
tar.c:1356: error: (near initialization for `sort_mode_flag[2]')
tar.c:1358: error: negative width in bit-field `_gl_verify_error_if_negative'
---
 src/tar.c |    6 +++++-
 1 files changed, 5 insertions(+), 1 deletions(-)

diff --git a/src/tar.c b/src/tar.c
index 059a042..a297c6f 100644
--- a/src/tar.c
+++ b/src/tar.c
@@ -741,7 +741,7 @@ static struct argp_option options[] = {
       " for FILE itself"), GRID+1 },
   {"exclude-ignore", EXCLUDE_IGNORE_OPTION, N_("FILE"), 0,
     N_("read exclude patterns for each directory from FILE, if it exists"),
-   GRID+1 }, 
+   GRID+1 },
   {"exclude-ignore-recursive", EXCLUDE_IGNORE_RECURSIVE_OPTION, N_("FILE"), 0,
     N_("read exclude patterns for each directory and its subdirectories "
        "from FILE, if it exists"), GRID+1 },
@@ -1345,14 +1345,18 @@ static char filename_terminator;
 static char const *const sort_mode_arg[] = {
   "none",
   "name",
+#if D_INO_IN_DIRENT
   "inode",
+#endif
   NULL
 };
 
 static int sort_mode_flag[] = {
     SAVEDIR_SORT_NONE,
     SAVEDIR_SORT_NAME,
+#if D_INO_IN_DIRENT
     SAVEDIR_SORT_INODE
+#endif
 };
 
 ARGMATCH_VERIFY (sort_mode_arg, sort_mode_flag);
-- 
1.7.3.2



From MAILER-DAEMON Wed Sep 24 16:47:03 2014
Received: from list by lists.gnu.org with archive (Exim 4.71)
	id 1XWtSp-0002gA-Ne
	for mharc-bug-tar@gnu.org; Wed, 24 Sep 2014 16:47:03 -0400
Received: from eggs.gnu.org ([2001:4830:134:3::10]:35395)
	by lists.gnu.org with esmtp (Exim 4.71)
	(envelope-from <jacksonpauls@gmail.com>) id 1XWru3-0007el-KM
	for bug-tar@gnu.org; Wed, 24 Sep 2014 15:07:04 -0400
Received: from Debian-exim by eggs.gnu.org with spam-scanned (Exim 4.71)
	(envelope-from <jacksonpauls@gmail.com>) id 1XWru2-000672-Du
	for bug-tar@gnu.org; Wed, 24 Sep 2014 15:07:03 -0400
Received: from mail-ob0-x232.google.com ([2607:f8b0:4003:c01::232]:52784)
	by eggs.gnu.org with esmtp (Exim 4.71)
	(envelope-from <jacksonpauls@gmail.com>) id 1XWru2-0005wO-3w
	for bug-tar@gnu.org; Wed, 24 Sep 2014 15:07:02 -0400
Received: by mail-ob0-f178.google.com with SMTP id va2so6892762obc.37
	for <bug-tar@gnu.org>; Wed, 24 Sep 2014 12:06:56 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
	h=mime-version:date:message-id:subject:from:to:content-type;
	bh=4G1YQiNoclaLO9mXZr8EERiJMcF4UC63Nwcw/GMs9j4=;
	b=adIVV8p7xbJPhNmMNpBVy5HDLG2FqnMCi/mYMMLWJKk6Y3ugJaosTXXADMPsT0HKo3
	L8DTegAxYD2EFU+/Y8ZnkkYB1tWb8A9W1k8Dgv/x1vOrQ0YCYs7CLd0swTHWrFhAyNzi
	6Iz/HobBGYCjT7iDfKuU9/ounKrpxMV7V/ZBDAAKdSLE0e3Iw139/GNBzMTYYYVLmtuZ
	KFQqIciOX/fqR3WdmcJEzZnnf+q/W+7OI6nrX2Fg+z59UMtpoNSUC/6a8a0Z6ahGjvio
	Rx5tCeUyLvGe97DvmekDMPtcaATV+FVcwXPMXXH8U0WIjdWIN8livxWBezGNq8XqI1fn
	P7Ig==
MIME-Version: 1.0
X-Received: by 10.182.32.5 with SMTP id e5mr8539177obi.73.1411585616129; Wed,
	24 Sep 2014 12:06:56 -0700 (PDT)
Received: by 10.60.175.227 with HTTP; Wed, 24 Sep 2014 12:06:56 -0700 (PDT)
Date: Wed, 24 Sep 2014 20:06:56 +0100
Message-ID: <CAM9P35vSh5rUPt_611hbc+4jmahstOxR_Yv7jFpr6XgfTBvNKg@mail.gmail.com>
From: Jackson <jacksonpauls@gmail.com>
To: bug-tar@gnu.org
Content-Type: text/plain; charset=UTF-8
X-detected-operating-system: by eggs.gnu.org: Error: Malformed IPv6 address
	(bad octet value).
X-Received-From: 2607:f8b0:4003:c01::232
X-Mailman-Approved-At: Wed, 24 Sep 2014 16:47:01 -0400
Subject: [Bug-tar] typo in doc/tar.1 near --transform option
X-BeenThere: bug-tar@gnu.org
X-Mailman-Version: 2.1.14
Precedence: list
List-Id: Bug reports for GNU Tar <bug-tar.gnu.org>
List-Unsubscribe: <https://lists.gnu.org/mailman/options/bug-tar>,
	<mailto:bug-tar-request@gnu.org?subject=unsubscribe>
List-Archive: <http://lists.gnu.org/archive/html/bug-tar>
List-Post: <mailto:bug-tar@gnu.org>
List-Help: <mailto:bug-tar-request@gnu.org?subject=help>
List-Subscribe: <https://lists.gnu.org/mailman/listinfo/bug-tar>,
	<mailto:bug-tar-request@gnu.org?subject=subscribe>
X-List-Received-Date: Wed, 24 Sep 2014 19:07:05 -0000

Hi,

On line 882 of doc/tar.1, I think \dR should be \fR:
\fB\-\-transform\fR=\fIEXPRESSION\dR [...]
should be
\fB\-\-transform\fR=\fIEXPRESSION\fR [...]

Cheers, Jackson


From MAILER-DAEMON Wed Sep 24 17:01:53 2014
Received: from list by lists.gnu.org with archive (Exim 4.71)
	id 1XWthA-0001Se-VG
	for mharc-bug-tar@gnu.org; Wed, 24 Sep 2014 17:01:53 -0400
Received: from eggs.gnu.org ([2001:4830:134:3::10]:57620)
	by lists.gnu.org with esmtp (Exim 4.71)
	(envelope-from <eblake@redhat.com>) id 1XWth4-0001Rw-Tj
	for bug-tar@gnu.org; Wed, 24 Sep 2014 17:01:51 -0400
Received: from Debian-exim by eggs.gnu.org with spam-scanned (Exim 4.71)
	(envelope-from <eblake@redhat.com>) id 1XWtgu-0001kg-Q6
	for bug-tar@gnu.org; Wed, 24 Sep 2014 17:01:46 -0400
Received: from mx1.redhat.com ([209.132.183.28]:12539)
	by eggs.gnu.org with esmtp (Exim 4.71)
	(envelope-from <eblake@redhat.com>) id 1XWtgu-0001kH-Hh
	for bug-tar@gnu.org; Wed, 24 Sep 2014 17:01:36 -0400
Received: from int-mx10.intmail.prod.int.phx2.redhat.com
	(int-mx10.intmail.prod.int.phx2.redhat.com [10.5.11.23])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id s8OKo6LK031957
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-GCM-SHA384 bits=256
	verify=FAIL); Wed, 24 Sep 2014 16:50:06 -0400
Received: from [10.3.113.110] (ovpn-113-110.phx2.redhat.com [10.3.113.110])
	by int-mx10.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id s8OKo646024047; Wed, 24 Sep 2014 16:50:06 -0400
Message-ID: <54232E7E.6050602@redhat.com>
Date: Wed, 24 Sep 2014 14:50:06 -0600
From: Eric Blake <eblake@redhat.com>
Organization: Red Hat, Inc.
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:31.0) Gecko/20100101 Thunderbird/31.1.0
MIME-Version: 1.0
To: Jackson <jacksonpauls@gmail.com>, bug-tar@gnu.org
References: <CAM9P35vSh5rUPt_611hbc+4jmahstOxR_Yv7jFpr6XgfTBvNKg@mail.gmail.com>
In-Reply-To: <CAM9P35vSh5rUPt_611hbc+4jmahstOxR_Yv7jFpr6XgfTBvNKg@mail.gmail.com>
OpenPGP: url=http://people.redhat.com/eblake/eblake.gpg
Content-Type: multipart/signed; micalg=pgp-sha256;
	protocol="application/pgp-signature";
	boundary="mpqWcRBWxBFjro3IL3WEDgXpqB5WD6Dn9"
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.23
X-detected-operating-system: by eggs.gnu.org: GNU/Linux 3.x
X-Received-From: 209.132.183.28
Subject: Re: [Bug-tar] typo in doc/tar.1 near --transform option
X-BeenThere: bug-tar@gnu.org
X-Mailman-Version: 2.1.14
Precedence: list
List-Id: Bug reports for GNU Tar <bug-tar.gnu.org>
List-Unsubscribe: <https://lists.gnu.org/mailman/options/bug-tar>,
	<mailto:bug-tar-request@gnu.org?subject=unsubscribe>
List-Archive: <http://lists.gnu.org/archive/html/bug-tar>
List-Post: <mailto:bug-tar@gnu.org>
List-Help: <mailto:bug-tar-request@gnu.org?subject=help>
List-Subscribe: <https://lists.gnu.org/mailman/listinfo/bug-tar>,
	<mailto:bug-tar-request@gnu.org?subject=subscribe>
X-List-Received-Date: Wed, 24 Sep 2014 21:01:52 -0000

This is an OpenPGP/MIME signed message (RFC 4880 and 3156)
--mpqWcRBWxBFjro3IL3WEDgXpqB5WD6Dn9
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable

On 09/24/2014 01:06 PM, Jackson wrote:
> Hi,
>=20
> On line 882 of doc/tar.1, I think \dR should be \fR:
> \fB\-\-transform\fR=3D\fIEXPRESSION\dR [...]
> should be
> \fB\-\-transform\fR=3D\fIEXPRESSION\fR [...]

Alas, upstream tar does not maintain tar.1; this is a downstream
addition.  You will need to report the typo to your distro.

--=20
Eric Blake   eblake redhat com    +1-919-301-3266
Libvirt virtualization library http://libvirt.org


--mpqWcRBWxBFjro3IL3WEDgXpqB5WD6Dn9
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1
Comment: Public key at http://people.redhat.com/eblake/eblake.gpg

iQEcBAEBCAAGBQJUIy5+AAoJEKeha0olJ0Nqy1wIAJa+20EbAMJA69Y/RkeERlYq
qSC62ZbMB/8V908lJiel59QSMQuPo65zjRvGrx0QqH225yeEhoP2GIFoKjZ9GeGz
JVvCIPafKHGCyWb/SFqOKpytCKsqxiJTI4FH+LmxVZx8Mza8lV7y2+NAcnvarvCG
Vt7w28FopmoGU+c3iTY/6ZEpzniYMIlJM3JuWX4wFgNLOfPOQNErqBecur0HEwj3
HY58cnp7AL/EiBnDLLn0lfYRAjwUctrP/iJhqwhzicWkTdeTqSlYa6qm2HsKD6AS
3Rvej4hRCysJy+b7cni2paOQ0ys/5RUm0kNucbauvcIH36p81yGAMjYXMjxUl+E=
=PjCM
-----END PGP SIGNATURE-----

--mpqWcRBWxBFjro3IL3WEDgXpqB5WD6Dn9--


From MAILER-DAEMON Wed Sep 24 17:23:47 2014
Received: from list by lists.gnu.org with archive (Exim 4.71)
	id 1XWu2N-0005qd-4N
	for mharc-bug-tar@gnu.org; Wed, 24 Sep 2014 17:23:47 -0400
Received: from eggs.gnu.org ([2001:4830:134:3::10]:33399)
	by lists.gnu.org with esmtp (Exim 4.71)
	(envelope-from <gray@gnu.org.ua>) id 1XWu2F-0005q7-0b
	for bug-tar@gnu.org; Wed, 24 Sep 2014 17:23:45 -0400
Received: from Debian-exim by eggs.gnu.org with spam-scanned (Exim 4.71)
	(envelope-from <gray@gnu.org.ua>) id 1XWu28-0006yt-Oa
	for bug-tar@gnu.org; Wed, 24 Sep 2014 17:23:38 -0400
Received: from ulysses.gnu.org.ua ([193.186.15.43]:38163 helo=gnu.org.ua)
	by eggs.gnu.org with esmtp (Exim 4.71)
	(envelope-from <gray@gnu.org.ua>) id 1XWu28-0006wo-DR
	for bug-tar@gnu.org; Wed, 24 Sep 2014 17:23:32 -0400
X-Mailutils-Message-Id: s8OLBW3p011281
Organization: GNU.org.ua
Received: from gnu.org.ua (localhost [127.0.0.1]) 
	by ulysses.gnu.org.ua with ESMTP id s8OLBW3p011281;
	Thu, 25 Sep 2014 00:11:32 +0300
Message-ID: <20140925001132.11276@ulysses.gnu.org.ua>
Date: Thu, 25 Sep 2014 00:11:32 -2100
From: Sergey Poznyakoff <gray@gnu.org.ua>
To: "Jackson" <jacksonpauls@gmail.com>
In-reply-to: Your message of Wed, 24 Sep 2014 20:06:56 +0100
	<CAM9P35vSh5rUPt_611hbc+4jmahstOxR_Yv7jFpr6XgfTBvNKg@mail.gmail.com>
References: <CAM9P35vSh5rUPt_611hbc+4jmahstOxR_Yv7jFpr6XgfTBvNKg@mail.gmail.com>
X-Mailer: MH-E 8.3.1; GNU Mailutils 2.99.98; GNU Emacs 24.2.1
X-detected-operating-system: by eggs.gnu.org: GNU/Linux 3.x
X-Received-From: 193.186.15.43
Cc: bug-tar@gnu.org
Subject: Re: [Bug-tar] typo in doc/tar.1 near --transform option
X-BeenThere: bug-tar@gnu.org
X-Mailman-Version: 2.1.14
Precedence: list
List-Id: Bug reports for GNU Tar <bug-tar.gnu.org>
List-Unsubscribe: <https://lists.gnu.org/mailman/options/bug-tar>,
	<mailto:bug-tar-request@gnu.org?subject=unsubscribe>
List-Archive: <http://lists.gnu.org/archive/html/bug-tar>
List-Post: <mailto:bug-tar@gnu.org>
List-Help: <mailto:bug-tar-request@gnu.org?subject=help>
List-Subscribe: <https://lists.gnu.org/mailman/listinfo/bug-tar>,
	<mailto:bug-tar-request@gnu.org?subject=subscribe>
X-List-Received-Date: Wed, 24 Sep 2014 21:23:45 -0000

Jackson <jacksonpauls@gmail.com> ha escrit:

> On line 882 of doc/tar.1, I think \dR should be \fR:
> \fB\-\-transform\fR=\fIEXPRESSION\dR [...]
> should be
> \fB\-\-transform\fR=\fIEXPRESSION\fR [...]

Yes, of course. Thanks for reporting that.

Regards,
Sergey


From MAILER-DAEMON Wed Sep 24 17:24:29 2014
Received: from list by lists.gnu.org with archive (Exim 4.71)
	id 1XWu33-0005yW-CG
	for mharc-bug-tar@gnu.org; Wed, 24 Sep 2014 17:24:29 -0400
Received: from eggs.gnu.org ([2001:4830:134:3::10]:33478)
	by lists.gnu.org with esmtp (Exim 4.71)
	(envelope-from <gray@gnu.org.ua>) id 1XWu2w-0005wV-BE
	for bug-tar@gnu.org; Wed, 24 Sep 2014 17:24:28 -0400
Received: from Debian-exim by eggs.gnu.org with spam-scanned (Exim 4.71)
	(envelope-from <gray@gnu.org.ua>) id 1XWu2q-00079r-8U
	for bug-tar@gnu.org; Wed, 24 Sep 2014 17:24:22 -0400
Received: from ulysses.gnu.org.ua ([193.186.15.43]:38166 helo=gnu.org.ua)
	by eggs.gnu.org with esmtp (Exim 4.71)
	(envelope-from <gray@gnu.org.ua>) id 1XWu2p-00079D-SZ
	for bug-tar@gnu.org; Wed, 24 Sep 2014 17:24:16 -0400
X-Mailutils-Message-Id: s8OLCOMk011367
Organization: GNU.org.ua
Received: from gnu.org.ua (localhost [127.0.0.1]) 
	by ulysses.gnu.org.ua with ESMTP id s8OLCOMk011367;
	Thu, 25 Sep 2014 00:12:24 +0300
Message-ID: <20140925001224.11362@ulysses.gnu.org.ua>
Date: Thu, 25 Sep 2014 00:12:24 -2100
From: Sergey Poznyakoff <gray@gnu.org.ua>
To: "Eric Blake" <eblake@redhat.com>
In-reply-to: Your message of Wed,
	24 Sep 2014 14:50:06 -0600 <54232E7E.6050602@redhat.com>
References: <CAM9P35vSh5rUPt_611hbc+4jmahstOxR_Yv7jFpr6XgfTBvNKg@mail.gmail.com>
	<54232E7E.6050602@redhat.com>
X-Mailer: MH-E 8.3.1; GNU Mailutils 2.99.98; GNU Emacs 24.2.1
X-detected-operating-system: by eggs.gnu.org: GNU/Linux 3.x
X-Received-From: 193.186.15.43
Cc: Jackson <jacksonpauls@gmail.com>, bug-tar@gnu.org
Subject: Re: [Bug-tar] typo in doc/tar.1 near --transform option
X-BeenThere: bug-tar@gnu.org
X-Mailman-Version: 2.1.14
Precedence: list
List-Id: Bug reports for GNU Tar <bug-tar.gnu.org>
List-Unsubscribe: <https://lists.gnu.org/mailman/options/bug-tar>,
	<mailto:bug-tar-request@gnu.org?subject=unsubscribe>
List-Archive: <http://lists.gnu.org/archive/html/bug-tar>
List-Post: <mailto:bug-tar@gnu.org>
List-Help: <mailto:bug-tar-request@gnu.org?subject=help>
List-Subscribe: <https://lists.gnu.org/mailman/listinfo/bug-tar>,
	<mailto:bug-tar-request@gnu.org?subject=subscribe>
X-List-Received-Date: Wed, 24 Sep 2014 21:24:28 -0000

Hi Eric,

> Alas, upstream tar does not maintain tar.1; this is a downstream
> addition.

No, starting from version 1.28, GNU tar includes the tar.1 manpage.

Regards,
Sergey


From MAILER-DAEMON Wed Sep 24 17:26:50 2014
Received: from list by lists.gnu.org with archive (Exim 4.71)
	id 1XWu5K-0006Pv-Nj
	for mharc-bug-tar@gnu.org; Wed, 24 Sep 2014 17:26:50 -0400
Received: from eggs.gnu.org ([2001:4830:134:3::10]:33664)
	by lists.gnu.org with esmtp (Exim 4.71)
	(envelope-from <nathanst+bugtar@ontko.com>) id 1XWu5E-0006Pk-Be
	for bug-tar@gnu.org; Wed, 24 Sep 2014 17:26:49 -0400
Received: from Debian-exim by eggs.gnu.org with spam-scanned (Exim 4.71)
	(envelope-from <nathanst+bugtar@ontko.com>) id 1XWu59-0007Z1-1P
	for bug-tar@gnu.org; Wed, 24 Sep 2014 17:26:44 -0400
Received: from nardol.ontko.com ([199.164.165.28]:33086)
	by eggs.gnu.org with esmtp (Exim 4.71)
	(envelope-from <nathanst+bugtar@ontko.com>) id 1XWu58-0007YH-Tm
	for bug-tar@gnu.org; Wed, 24 Sep 2014 17:26:38 -0400
Received: from shire.ontko.com (shire.ontko.com [199.164.165.3])
	by nardol.ontko.com (Postfix) with ESMTP id 352361D7E94
	for <bug-tar@gnu.org>; Wed, 24 Sep 2014 17:26:33 -0400 (EDT)
Received: from shire.ontko.com (nathanst@localhost [127.0.0.1])
	by shire.ontko.com (8.13.8/8.13.8/Debian-3+etch1) with ESMTP id
	s8OLQWTG003948 for <bug-tar@gnu.org>; Wed, 24 Sep 2014 17:26:32 -0400
Received: (from nathanst@localhost)
	by shire.ontko.com (8.13.8/8.13.8/Submit) id s8OLQWDN003947
	for bug-tar@gnu.org; Wed, 24 Sep 2014 17:26:32 -0400
X-Authentication-Warning: shire.ontko.com: nathanst set sender to
	nathanst+bugtar@ontko.com using -f
Date: Wed, 24 Sep 2014 17:26:32 -0400
From: Nathan Stratton Treadway <nathanst+bugtar@ontko.com>
To: bug-tar@gnu.org
Message-ID: <20140924212632.GK28992@shire.ontko.com>
References: <CAM9P35vSh5rUPt_611hbc+4jmahstOxR_Yv7jFpr6XgfTBvNKg@mail.gmail.com>
	<54232E7E.6050602@redhat.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <54232E7E.6050602@redhat.com>
User-Agent: Mutt/1.5.20 (2009-06-14)
X-detected-operating-system: by eggs.gnu.org: GNU/Linux 2.4.x-2.6.x [generic]
X-Received-From: 199.164.165.28
Subject: Re: [Bug-tar] typo in doc/tar.1 near --transform option
X-BeenThere: bug-tar@gnu.org
X-Mailman-Version: 2.1.14
Precedence: list
List-Id: Bug reports for GNU Tar <bug-tar.gnu.org>
List-Unsubscribe: <https://lists.gnu.org/mailman/options/bug-tar>,
	<mailto:bug-tar-request@gnu.org?subject=unsubscribe>
List-Archive: <http://lists.gnu.org/archive/html/bug-tar>
List-Post: <mailto:bug-tar@gnu.org>
List-Help: <mailto:bug-tar-request@gnu.org?subject=help>
List-Subscribe: <https://lists.gnu.org/mailman/listinfo/bug-tar>,
	<mailto:bug-tar-request@gnu.org?subject=subscribe>
X-List-Received-Date: Wed, 24 Sep 2014 21:26:49 -0000

On Wed, Sep 24, 2014 at 14:50:06 -0600, Eric Blake wrote:
> On 09/24/2014 01:06 PM, Jackson wrote:
> > Hi,
> > 
> > On line 882 of doc/tar.1, I think \dR should be \fR:
> > \fB\-\-transform\fR=\fIEXPRESSION\dR [...]
> > should be
> > \fB\-\-transform\fR=\fIEXPRESSION\fR [...]
> 
> Alas, upstream tar does not maintain tar.1; this is a downstream
> addition.  You will need to report the typo to your distro.

The GNU Tar project added an "official" tar.1 page recently; see
  http://git.savannah.gnu.org/cgit/tar.git/tree/doc/tar.1#n882
for the git version of the above-quoted line...

					Nathan


----------------------------------------------------------------------------
Nathan Stratton Treadway  -  nathanst@ontko.com  -  Mid-Atlantic region
Ray Ontko & Co.  -  Software consulting services  -   http://www.ontko.com/
 GPG Key: http://www.ontko.com/~nathanst/gpg_key.txt   ID: 1023D/ECFB6239
 Key fingerprint = 6AD8 485E 20B9 5C71 231C  0C32 15F3 ADCD ECFB 6239


From MAILER-DAEMON Thu Sep 25 01:21:29 2014
Received: from list by lists.gnu.org with archive (Exim 4.71)
	id 1XX1Uf-0005Bm-Cn
	for mharc-bug-tar@gnu.org; Thu, 25 Sep 2014 01:21:29 -0400
Received: from eggs.gnu.org ([2001:4830:134:3::10]:59038)
	by lists.gnu.org with esmtp (Exim 4.71)
	(envelope-from <Howard.Bryden@psba.qld.gov.au>) id 1XX11i-0001fM-Qs
	for bug-tar@gnu.org; Thu, 25 Sep 2014 00:51:39 -0400
Received: from Debian-exim by eggs.gnu.org with spam-scanned (Exim 4.71)
	(envelope-from <Howard.Bryden@psba.qld.gov.au>) id 1XX11e-0007KY-CX
	for bug-tar@gnu.org; Thu, 25 Sep 2014 00:51:34 -0400
Received: from mail.dcs.qld.gov.au ([131.242.134.236]:7865)
	by eggs.gnu.org with esmtp (Exim 4.71)
	(envelope-from <Howard.Bryden@psba.qld.gov.au>) id 1XX11c-0007Io-0u
	for bug-tar@gnu.org; Thu, 25 Sep 2014 00:51:30 -0400
Received: from bnegwy01.desqld.internal ([10.2.80.70])
	by bneecf01.desqld.internal with ESMTP; 25 Sep 2014 14:51:14 +1000
Received: from bnebhs01.desqld.internal ([10.2.80.54]) by
	BNEGWY01.desqld.internal with Microsoft SMTPSVC(6.0.3790.4675); 
	Thu, 25 Sep 2014 14:51:15 +1000
Received: from KEDCAS01.desqld.internal ([10.2.80.217]) by
	bnebhs01.desqld.internal with Microsoft SMTPSVC(6.0.3790.4675); 
	Thu, 25 Sep 2014 14:51:14 +1000
Received: from KEDCAS03.desqld.internal (10.2.80.219) by
	KEDCAS01.desqld.internal (10.2.80.217) with Microsoft SMTP Server (TLS)
	id 14.3.195.1; Thu, 25 Sep 2014 14:51:14 +1000
Received: from KEDMBX01.desqld.internal ([fe80::7c38:b395:dd3:4c61]) by
	KEDCAS03.desqld.internal ([::1]) with mapi id 14.03.0195.001;
	Thu, 25 Sep 2014 14:51:13 +1000
From: Howard Bryden <Howard.Bryden@psba.qld.gov.au>
To: "bug-tar@gnu.org" <bug-tar@gnu.org>
Thread-Topic: GNU tar directory metadata
Thread-Index: Ac/Ydwb1WTBzF/XdQDS/8sqeD+7oRg==
Date: Thu, 25 Sep 2014 04:51:12 +0000
Message-ID: <7E1CBFD3B4F0F646B00AA77C64F3D9230EE50AE6@KEDMBX01.desqld.internal>
Accept-Language: en-AU, en-US
Content-Language: en-US
X-MS-Has-Attach: yes
X-MS-TNEF-Correlator: 
x-originating-ip: [10.2.230.55]
Content-Type: multipart/related;
	boundary="_005_7E1CBFD3B4F0F646B00AA77C64F3D9230EE50AE6KEDMBX01desqldi_";
	type="multipart/alternative"
MIME-Version: 1.0
X-OriginalArrivalTime: 25 Sep 2014 04:51:14.0926 (UTC)
	FILETIME=[561C18E0:01CFD87C]
X-detected-operating-system: by eggs.gnu.org: Genre and OS details not
	recognized.
X-Received-From: 131.242.134.236
X-Mailman-Approved-At: Thu, 25 Sep 2014 01:21:27 -0400
Subject: [Bug-tar] GNU tar directory metadata
X-BeenThere: bug-tar@gnu.org
X-Mailman-Version: 2.1.14
Precedence: list
List-Id: Bug reports for GNU Tar <bug-tar.gnu.org>
List-Unsubscribe: <https://lists.gnu.org/mailman/options/bug-tar>,
	<mailto:bug-tar-request@gnu.org?subject=unsubscribe>
List-Archive: <http://lists.gnu.org/archive/html/bug-tar>
List-Post: <mailto:bug-tar@gnu.org>
List-Help: <mailto:bug-tar-request@gnu.org?subject=help>
List-Subscribe: <https://lists.gnu.org/mailman/listinfo/bug-tar>,
	<mailto:bug-tar-request@gnu.org?subject=subscribe>
X-List-Received-Date: Thu, 25 Sep 2014 04:51:39 -0000

--_005_7E1CBFD3B4F0F646B00AA77C64F3D9230EE50AE6KEDMBX01desqldi_
Content-Type: multipart/alternative;
	boundary="_000_7E1CBFD3B4F0F646B00AA77C64F3D9230EE50AE6KEDMBX01desqldi_"

--_000_7E1CBFD3B4F0F646B00AA77C64F3D9230EE50AE6KEDMBX01desqldi_
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: quoted-printable

Guys,

When restoring files from a streamed archived (i.e. via the option -f -), i=
t appears the parent subdirectories are restored with the user's ownership =
and umasked permissions (subject to any use of --no-overwrite-dir).  I'm us=
ing the latest tar, i.e. 1.28:

bnetst03:/usr/local/sbin/des_setup/svc # /usr/local/bin/tar --version
tar (GNU tar) 1.28
Copyright (C) 2014 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.htm=
l>.
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.

Written by John Gilmore and Jay Fenlason.
bnetst03:/usr/local/sbin/des_setup/svc #


For example, we have the following directory:

bnetst03:/tmp # ls -l -d /etc /etc/opt /etc/opt/wbem
dr-xr-xr-x  40 root       sys           8192 Sep 25 14:12 /etc
dr-xr-xr-x  25 bin        bin           8192 Mar 13  2014 /etc/opt
drwxr-xr-x   2 cimsrvr    bin           8192 Sep 25 12:37 /etc/opt/wbem
bnetst03:/tmp # ls -l /etc/opt/wbem
total 48
-rw-r--r--   1 bin        bin            150 Dec  1  2010 cimserver_retry.c=
onf
-rw-------   1 cimsrvr    cimsrvr         12 Sep 25 12:37 cimserver_start.c=
onf
-r-xr--r--   1 bin        bin            759 Dec  1  2010 providerVersion
bnetst03:/tmp #


Tar-ing this small directory into an archive ...

bnetst03:/ # /usr/local/tar cvf /tmp/t /etc/opt/wbem
etc/opt/wbem/
etc/opt/wbem/cimserver_retry.conf
etc/opt/wbem/providerVersion
etc/opt/wbem/cimserver_start.conf
bnetst03:/ #


We see that, upon restoring a particular member of wbem/ from the archive p=
resented through stdin, that member is restored with its correct metadata b=
ut its parent subdirectories are restored with the ownership of the session=
 user and permissions as per its umask:

bnetst03:/tmp # cat /tmp/t | /usr/local/bin/tar xvf - etc/opt/wbem/cimserve=
r_start.conf
etc/opt/wbem/cimserver_start.conf
bnetst03:/tmp # ls -l -d etc etc/opt etc/opt/wbem
drwx------   3 root       sys             96 Sep 25 14:37 etc
drwx------   3 root       sys             96 Sep 25 14:37 etc/opt
drwx------   2 root       sys             96 Sep 25 14:37 etc/opt/wbem
bnetst03:/tmp # ls -l etc/opt/wbem
total 16
-rw-------   1 cimsrvr    cimsrvr         12 Sep 25 12:37 cimserver_start.c=
onf
bnetst03:/tmp #


If the entire archive is extracted, only the immediate parent subdirectory =
has its correct metadata, the others still appear with session user ownersh=
ip and permissions:

bnetst03:/tmp # ls -l -d etc
drwx------   3 root       sys             96 Sep 25 14:47 etc
bnetst03:/tmp # ll -R etc
total 0
drwx------   3 root       sys             96 Sep 25 14:47 opt

etc/opt:
total 16
drwxr-xr-x   2 cimsrvr    bin           8192 Sep 25 12:37 wbem

etc/opt/wbem:
total 48
-rw-r--r--   1 bin        bin            150 Dec  1  2010 cimserver_retry.c=
onf
-rw-------   1 cimsrvr    cimsrvr         12 Sep 25 12:37 cimserver_start.c=
onf
-r-xr--r--   1 bin        bin            759 Dec  1  2010 providerVersion
bnetst03:/tmp #




Rocket J. Squirrel: "... we're going to have to think!"
Bullwinkle J. Moose: "There must be an easier way than that."
HOWARD BRYDEN

Senior Unix Administrator
Infrastructure Support
Public Safety Business Agency

PHONE: 07 3635 3087
POSTAL: GPO Box 1425, Brisbane, QLD 4001 | EMAIL: Howard.Bryden@dcs.qld.gov=
.au<mailto:Howard.Bryden@dcs.qld.gov.au>

[cid:image001.jpg@01CF9486.DD35C1D0]     [cid:image003.jpg@01CF8FBC.3E77B59=
0]
Great state.  Great opportunity.


This correspondence is for the named persons only. It may contain confident=
ial or privileged information or both. No confidentiality or privilege is w=
aived or lost by any mis transmission. If you receive this correspondence i=
n error please delete it from your system immediately and notify the sender=
. You must not disclose, copy or relay on any part of this correspondence, =
if you are not the intended recipient. Any opinions expressed in this messa=
ge are those of the individual sender except where the sender expressly, an=
d with the authority, states them to be the opinions of the Queensland Gove=
rnment.

All reasonable precautions will be taken to respect the privacy of individu=
als in accordance with the Information Privacy Act 2009 (Qld).

--_000_7E1CBFD3B4F0F646B00AA77C64F3D9230EE50AE6KEDMBX01desqldi_
Content-Type: text/html; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: quoted-printable

<html xmlns:v=3D"urn:schemas-microsoft-com:vml" xmlns:o=3D"urn:schemas-micr=
osoft-com:office:office" xmlns:w=3D"urn:schemas-microsoft-com:office:word" =
xmlns:m=3D"http://schemas.microsoft.com/office/2004/12/omml" xmlns=3D"http:=
//www.w3.org/TR/REC-html40">
<head>
<meta http-equiv=3D"Content-Type" content=3D"text/html; charset=3Dus-ascii">
<meta name=3D"Generator" content=3D"Microsoft Word 14 (filtered medium)">
<!--[if !mso]><style>v\:* {behavior:url(#default#VML);}
o\:* {behavior:url(#default#VML);}
w\:* {behavior:url(#default#VML);}
.shape {behavior:url(#default#VML);}
</style><![endif]--><style><!--
/* Font Definitions */
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:Tahoma;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:Verdana;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
/* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0cm;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";
	mso-fareast-language:EN-US;}
a:link, span.MsoHyperlink
	{mso-style-priority:99;
	color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-priority:99;
	color:purple;
	text-decoration:underline;}
p.MsoAcetate, li.MsoAcetate, div.MsoAcetate
	{mso-style-priority:99;
	mso-style-link:"Balloon Text Char";
	margin:0cm;
	margin-bottom:.0001pt;
	font-size:8.0pt;
	font-family:"Tahoma","sans-serif";
	mso-fareast-language:EN-US;}
span.EmailStyle17
	{mso-style-type:personal-compose;
	font-family:"Verdana","sans-serif";
	color:windowtext;}
span.BalloonTextChar
	{mso-style-name:"Balloon Text Char";
	mso-style-priority:99;
	mso-style-link:"Balloon Text";
	font-family:"Tahoma","sans-serif";}
.MsoChpDefault
	{mso-style-type:export-only;
	mso-fareast-language:EN-US;}
@page WordSection1
	{size:612.0pt 792.0pt;
	margin:72.0pt 72.0pt 72.0pt 72.0pt;}
div.WordSection1
	{page:WordSection1;}
--></style><!--[if gte mso 9]><xml>
<o:shapedefaults v:ext=3D"edit" spidmax=3D"1026" />
</xml><![endif]--><!--[if gte mso 9]><xml>
<o:shapelayout v:ext=3D"edit">
<o:idmap v:ext=3D"edit" data=3D"1" />
</o:shapelayout></xml><![endif]-->
</head>
<body lang=3D"EN-AU" link=3D"blue" vlink=3D"purple">
<div class=3D"WordSection1">
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Verdana&quot;,&quot=
;sans-serif&quot;">Guys,<o:p></o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Verdana&quot;,&quot=
;sans-serif&quot;"><o:p>&nbsp;</o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Verdana&quot;,&quot=
;sans-serif&quot;">When restoring files from a streamed archived (i.e. via =
the option
<b>-f -</b>), it appears the parent subdirectories are restored with the us=
er's ownership and umasked permissions (subject to any use of
<b>--no-overwrite-dir</b>).&nbsp; I'm using the latest <b>tar</b>, i.e. 1.2=
8:<o:p></o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Verdana&quot;,&quot=
;sans-serif&quot;"><o:p>&nbsp;</o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Courier New&quot;">=
bnetst03:/usr/local/sbin/des_setup/svc # /usr/local/bin/tar --version<o:p><=
/o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Courier New&quot;">=
tar (GNU tar) 1.28<o:p></o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Courier New&quot;">=
Copyright (C) 2014 Free Software Foundation, Inc.<o:p></o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Courier New&quot;">=
License GPLv3&#43;: GNU GPL version 3 or later &lt;http://gnu.org/licenses/=
gpl.html&gt;.<o:p></o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Courier New&quot;">=
This is free software: you are free to change and redistribute it.<o:p></o:=
p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Courier New&quot;">=
There is NO WARRANTY, to the extent permitted by law.<o:p></o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Courier New&quot;">=
<o:p>&nbsp;</o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Courier New&quot;">=
Written by John Gilmore and Jay Fenlason.<o:p></o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Courier New&quot;">=
bnetst03:/usr/local/sbin/des_setup/svc #<o:p></o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Verdana&quot;,&quot=
;sans-serif&quot;"><o:p>&nbsp;</o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Verdana&quot;,&quot=
;sans-serif&quot;"><o:p>&nbsp;</o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Verdana&quot;,&quot=
;sans-serif&quot;">For example, we have the following directory:<o:p></o:p>=
</span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Verdana&quot;,&quot=
;sans-serif&quot;"><o:p>&nbsp;</o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Courier New&quot;">=
bnetst03:/tmp # ls -l -d /etc /etc/opt /etc/opt/wbem<o:p></o:p></span></p>
<p class=3D"MsoNormal"><b><span style=3D"font-family:&quot;Courier New&quot=
;">dr-xr-xr-x&nbsp; 40 root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sys&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 8192 Sep 25 14:12 /etc=
<o:p></o:p></span></b></p>
<p class=3D"MsoNormal"><b><span style=3D"font-family:&quot;Courier New&quot=
;">dr-xr-xr-x&nbsp; 25 bin&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bin&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 8192 Mar 13&nbsp;=
 2014 /etc/opt<o:p></o:p></span></b></p>
<p class=3D"MsoNormal"><b><span style=3D"font-family:&quot;Courier New&quot=
;">drwxr-xr-x&nbsp;&nbsp; 2 cimsrvr&nbsp;&nbsp;&nbsp; bin&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 8192 Sep 25 12:37 /etc/opt/wbem<=
o:p></o:p></span></b></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Courier New&quot;">=
bnetst03:/tmp # ls -l /etc/opt/wbem<o:p></o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Courier New&quot;">=
total 48<o:p></o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Courier New&quot;">=
-rw-r--r--&nbsp;&nbsp; 1 bin&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bin&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 150 Dec&n=
bsp; 1&nbsp; 2010 cimserver_retry.conf<o:p></o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Courier New&quot;">=
-rw-------&nbsp;&nbsp; 1 cimsrvr&nbsp;&nbsp;&nbsp; cimsrvr&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 12 Sep 25 12:37 cimserver_start.conf<o:p></=
o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Courier New&quot;">=
-r-xr--r--&nbsp;&nbsp; 1 bin&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bin&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 759 Dec&n=
bsp; 1&nbsp; 2010 providerVersion<o:p></o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Courier New&quot;">=
bnetst03:/tmp #<o:p></o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Verdana&quot;,&quot=
;sans-serif&quot;"><o:p>&nbsp;</o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Verdana&quot;,&quot=
;sans-serif&quot;"><o:p>&nbsp;</o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Verdana&quot;,&quot=
;sans-serif&quot;">Tar-ing this small directory into an archive &#8230;<o:p=
></o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Verdana&quot;,&quot=
;sans-serif&quot;"><o:p>&nbsp;</o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Courier New&quot;">=
bnetst03:/ # /usr/local/tar cvf /tmp/t /etc/opt/wbem<o:p></o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Courier New&quot;">=
etc/opt/wbem/<o:p></o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Courier New&quot;">=
etc/opt/wbem/cimserver_retry.conf<o:p></o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Courier New&quot;">=
etc/opt/wbem/providerVersion<o:p></o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Courier New&quot;">=
etc/opt/wbem/cimserver_start.conf<o:p></o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Courier New&quot;">=
bnetst03:/ #<o:p></o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Verdana&quot;,&quot=
;sans-serif&quot;"><o:p>&nbsp;</o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Verdana&quot;,&quot=
;sans-serif&quot;"><o:p>&nbsp;</o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Verdana&quot;,&quot=
;sans-serif&quot;">We see that, upon restoring a
<i>particular member</i> of <b>wbem/</b> from the archive <i>presented thro=
ugh stdin</i>, that member is restored with its correct metadata but its pa=
rent subdirectories are restored with the ownership of the session user and=
 permissions as per its umask:<o:p></o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Verdana&quot;,&quot=
;sans-serif&quot;"><o:p>&nbsp;</o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Courier New&quot;">=
bnetst03:/tmp # cat /tmp/t | /usr/local/bin/tar xvf - etc/opt/wbem/cimserve=
r_start.conf<o:p></o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Courier New&quot;">=
etc/opt/wbem/cimserver_start.conf<o:p></o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Courier New&quot;">=
bnetst03:/tmp # ls -l -d etc etc/opt etc/opt/wbem<o:p></o:p></span></p>
<p class=3D"MsoNormal"><b><span style=3D"font-family:&quot;Courier New&quot=
;;color:red">drwx------&nbsp;&nbsp; 3 root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp; sys&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp; 96 Sep 25 14:37 etc<o:p></o:p></span></b></p>
<p class=3D"MsoNormal"><b><span style=3D"font-family:&quot;Courier New&quot=
;;color:red">drwx------&nbsp;&nbsp; 3 root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp; sys&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp; 96 Sep 25 14:37 etc/opt<o:p></o:p></span></b></p>
<p class=3D"MsoNormal"><b><span style=3D"font-family:&quot;Courier New&quot=
;;color:red">drwx------&nbsp;&nbsp; 2 root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp; sys&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp; 96 Sep 25 14:37 etc/opt/wbem<o:p></o:p></span></b></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Courier New&quot;">=
bnetst03:/tmp # ls -l etc/opt/wbem<o:p></o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Courier New&quot;">=
total 16<o:p></o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Courier New&quot;">=
-rw-------&nbsp;&nbsp; 1 cimsrvr&nbsp;&nbsp;&nbsp; cimsrvr&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 12 Sep 25 12:37 cimserver_start.conf<o:p></=
o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Courier New&quot;">=
bnetst03:/tmp #<o:p></o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Verdana&quot;,&quot=
;sans-serif&quot;"><o:p>&nbsp;</o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Verdana&quot;,&quot=
;sans-serif&quot;"><o:p>&nbsp;</o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Verdana&quot;,&quot=
;sans-serif&quot;">If the entire archive is extracted, only the
<i>immediate</i> parent subdirectory has its correct metadata, the others s=
till appear with session user ownership and permissions:<o:p></o:p></span><=
/p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Verdana&quot;,&quot=
;sans-serif&quot;"><o:p>&nbsp;</o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Courier New&quot;">=
bnetst03:/tmp # ls -l -d etc<o:p></o:p></span></p>
<p class=3D"MsoNormal"><b><span style=3D"font-family:&quot;Courier New&quot=
;;color:red">drwx------&nbsp;&nbsp; 3 root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp; sys&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp; 96 Sep 25 14:47 etc<o:p></o:p></span></b></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Courier New&quot;">=
bnetst03:/tmp # ll -R etc<o:p></o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Courier New&quot;">=
total 0<o:p></o:p></span></p>
<p class=3D"MsoNormal"><b><span style=3D"font-family:&quot;Courier New&quot=
;;color:red">drwx------&nbsp;&nbsp; 3 root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp; sys&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp; 96 Sep 25 14:47 opt<o:p></o:p></span></b></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Courier New&quot;">=
<o:p>&nbsp;</o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Courier New&quot;">=
etc/opt:<o:p></o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Courier New&quot;">=
total 16<o:p></o:p></span></p>
<p class=3D"MsoNormal"><b><span style=3D"font-family:&quot;Courier New&quot=
;">drwxr-xr-x&nbsp;&nbsp; 2 cimsrvr&nbsp;&nbsp;&nbsp; bin&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 8192 Sep 25 12:37 wbem<o:p></o:p=
></span></b></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Courier New&quot;">=
<o:p>&nbsp;</o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Courier New&quot;">=
etc/opt/wbem:<o:p></o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Courier New&quot;">=
total 48<o:p></o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Courier New&quot;">=
-rw-r--r--&nbsp;&nbsp; 1 bin&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bin&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 150 Dec&n=
bsp; 1&nbsp; 2010 cimserver_retry.conf<o:p></o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Courier New&quot;">=
-rw-------&nbsp;&nbsp; 1 cimsrvr&nbsp;&nbsp;&nbsp; cimsrvr&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 12 Sep 25 12:37 cimserver_start.conf<o:p></=
o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Courier New&quot;">=
-r-xr--r--&nbsp;&nbsp; 1 bin&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bin&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 759 Dec&n=
bsp; 1&nbsp; 2010 providerVersion<o:p></o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Courier New&quot;">=
bnetst03:/tmp #<o:p></o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Verdana&quot;,&quot=
;sans-serif&quot;"><o:p>&nbsp;</o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Verdana&quot;,&quot=
;sans-serif&quot;"><o:p>&nbsp;</o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Verdana&quot;,&quot=
;sans-serif&quot;"><o:p>&nbsp;</o:p></span></p>
<p class=3D"MsoNormal" style=3D"mso-margin-top-alt:auto;mso-margin-bottom-a=
lt:auto"><u><span style=3D"font-size:10.0pt;font-family:&quot;Arial&quot;,&=
quot;sans-serif&quot;;color:black;mso-fareast-language:EN-AU">&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></u><u><span style=
=3D"font-size:12.0pt;font-family:&quot;Times New Roman&quot;,&quot;serif&qu=
ot;;color:blue;mso-fareast-language:EN-AU">
</span></u><span style=3D"font-size:12.0pt;font-family:&quot;Times New Roma=
n&quot;,&quot;serif&quot;;color:blue;mso-fareast-language:EN-AU"><br>
</span><b><span style=3D"font-size:10.0pt;font-family:&quot;Verdana&quot;,&=
quot;sans-serif&quot;;color:blue;mso-fareast-language:EN-AU">Rocket J. Squi=
rrel</span></b><span style=3D"font-size:10.0pt;font-family:&quot;Verdana&qu=
ot;,&quot;sans-serif&quot;;color:blue;mso-fareast-language:EN-AU">: &quot;.=
.. we're
 going to have to think!&quot;</span><span style=3D"font-size:12.0pt;font-f=
amily:&quot;Times New Roman&quot;,&quot;serif&quot;;color:blue;mso-fareast-=
language:EN-AU">
<br>
</span><b><span style=3D"font-size:10.0pt;font-family:&quot;Verdana&quot;,&=
quot;sans-serif&quot;;color:blue;mso-fareast-language:EN-AU">Bullwinkle J. =
Moose</span></b><span style=3D"font-size:10.0pt;font-family:&quot;Verdana&q=
uot;,&quot;sans-serif&quot;;color:blue;mso-fareast-language:EN-AU">: &quot;=
There
 must be an easier way than that.&quot;</span><span style=3D"font-size:12.0=
pt;font-family:&quot;Times New Roman&quot;,&quot;serif&quot;;color:blue;mso=
-fareast-language:EN-AU">
<o:p></o:p></span></p>
<p class=3D"MsoNormal"><b><span style=3D"font-size:10.0pt;font-family:&quot=
;Arial&quot;,&quot;sans-serif&quot;;color:black;mso-fareast-language:EN-AU"=
>HOWARD BRYDEN</span></b><span style=3D"font-size:12.0pt;font-family:&quot;=
Times New Roman&quot;,&quot;serif&quot;;color:blue;mso-fareast-language:EN-=
AU">
<br>
</span><u><span style=3D"font-size:10.0pt;font-family:&quot;Arial&quot;,&qu=
ot;sans-serif&quot;;color:black;mso-fareast-language:EN-AU">&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></u><u><span s=
tyle=3D"font-size:12.0pt;font-family:&quot;Times New Roman&quot;,&quot;seri=
f&quot;;color:blue;mso-fareast-language:EN-AU">
</span></u><span style=3D"font-size:12.0pt;font-family:&quot;Times New Roma=
n&quot;,&quot;serif&quot;;color:blue;mso-fareast-language:EN-AU"><br>
</span><span style=3D"font-size:10.0pt;font-family:&quot;Arial&quot;,&quot;=
sans-serif&quot;;color:black;mso-fareast-language:EN-AU">Senior Unix Admini=
strator</span><span style=3D"font-size:12.0pt;font-family:&quot;Times New R=
oman&quot;,&quot;serif&quot;;color:blue;mso-fareast-language:EN-AU">
<br>
</span><span style=3D"font-size:10.0pt;font-family:&quot;Arial&quot;,&quot;=
sans-serif&quot;;color:black;mso-fareast-language:EN-AU">Infrastructure Sup=
port</span><span style=3D"font-size:12.0pt;font-family:&quot;Times New Roma=
n&quot;,&quot;serif&quot;;color:blue;mso-fareast-language:EN-AU"><br>
</span><span style=3D"font-size:10.0pt;font-family:&quot;Arial&quot;,&quot;=
sans-serif&quot;;color:black;mso-fareast-language:EN-AU">Public Safety Busi=
ness Agency</span><span style=3D"font-size:12.0pt;font-family:&quot;Times N=
ew Roman&quot;,&quot;serif&quot;;color:blue;mso-fareast-language:EN-AU"><br>
</span><u><span style=3D"font-size:10.0pt;font-family:&quot;Arial&quot;,&qu=
ot;sans-serif&quot;;color:black;mso-fareast-language:EN-AU">&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></u><u><span s=
tyle=3D"font-size:12.0pt;font-family:&quot;Times New Roman&quot;,&quot;seri=
f&quot;;color:blue;mso-fareast-language:EN-AU">
</span></u><span style=3D"font-size:12.0pt;font-family:&quot;Times New Roma=
n&quot;,&quot;serif&quot;;color:blue;mso-fareast-language:EN-AU"><br>
</span><b><span style=3D"font-size:10.0pt;font-family:&quot;Arial&quot;,&qu=
ot;sans-serif&quot;;color:black;mso-fareast-language:EN-AU">PHONE</span></b=
><span style=3D"font-size:10.0pt;font-family:&quot;Arial&quot;,&quot;sans-s=
erif&quot;;color:black;mso-fareast-language:EN-AU">: 07 3635 3087
</span><span style=3D"font-size:12.0pt;font-family:&quot;Times New Roman&qu=
ot;,&quot;serif&quot;;color:blue;mso-fareast-language:EN-AU"><br>
</span><b><span style=3D"font-size:10.0pt;font-family:&quot;Arial&quot;,&qu=
ot;sans-serif&quot;;color:black;mso-fareast-language:EN-AU">POSTAL</span></=
b><span style=3D"font-size:10.0pt;font-family:&quot;Arial&quot;,&quot;sans-=
serif&quot;;color:black;mso-fareast-language:EN-AU">: GPO Box 1425, Brisban=
e,
 QLD 4001 |</span><b><span style=3D"font-size:12.0pt;font-family:&quot;Time=
s New Roman&quot;,&quot;serif&quot;;color:blue;mso-fareast-language:EN-AU">
</span></b><b><span style=3D"font-size:10.0pt;font-family:&quot;Arial&quot;=
,&quot;sans-serif&quot;;color:black;mso-fareast-language:EN-AU">EMAIL:</spa=
n></b><span style=3D"font-size:10.0pt;font-family:&quot;Arial&quot;,&quot;s=
ans-serif&quot;;color:blue;mso-fareast-language:EN-AU">&nbsp;<u><a href=3D"=
mailto:Howard.Bryden@dcs.qld.gov.au" title=3D"blocked::mailto:Howard.Bryden=
@dcs.qld.gov.au"><span style=3D"color:blue">Howard.Bryden@dcs.qld.gov.au</s=
pan></a></u></span><span style=3D"font-size:12.0pt;font-family:&quot;Times =
New Roman&quot;,&quot;serif&quot;;color:blue;mso-fareast-language:EN-AU">
<o:p></o:p></span></p>
<p class=3D"MsoNormal"><u><span style=3D"font-size:9.0pt;font-family:&quot;=
Arial&quot;,&quot;sans-serif&quot;;color:blue;mso-fareast-language:EN-AU"><=
o:p><span style=3D"text-decoration:none">&nbsp;</span></o:p></span></u></p>
<p class=3D"MsoNormal"><span style=3D"color:green;mso-fareast-language:EN-A=
U"><img border=3D"0" width=3D"60" height=3D"76" id=3D"Picture_x0020_1" src=
=3D"cid:image001.jpg@01CFD8CB.5631F8F0" alt=3D"cid:image001.jpg@01CF9486.DD=
35C1D0"></span><span lang=3D"EN-US" style=3D"color:green;mso-fareast-langua=
ge:EN-AU">&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style=3D"color:green;mso-fareast-language:EN-AU"><img border=
=3D"0" width=3D"197" height=3D"28" id=3D"Picture_x0020_2" src=3D"cid:image0=
02.jpg@01CFD8CB.5631F8F0" alt=3D"cid:image003.jpg@01CF8FBC.3E77B590"></span=
><span style=3D"color:#1F497D;mso-fareast-language:EN-AU">&nbsp;&nbsp;&nbsp=
;&nbsp;</span><span style=3D"color:#1F497D;mso-fareast-language:EN-AU"><o:p=
></o:p></span></p>
<p class=3D"MsoNormal"><b><span style=3D"font-size:9.0pt;font-family:&quot;=
Arial&quot;,&quot;sans-serif&quot;;color:#002060;mso-fareast-language:EN-AU=
">Great state.&nbsp; Great opportunity.<o:p></o:p></span></b></p>
<p class=3D"MsoNormal"><span style=3D"font-size:12.0pt;font-family:&quot;Ve=
rdana&quot;,&quot;sans-serif&quot;;color:blue;mso-fareast-language:EN-AU"><=
o:p>&nbsp;</o:p></span></p>
<p class=3D"MsoNormal"><o:p>&nbsp;</o:p></p>
</div>
<div><br>This correspondence is for the named persons only. It may contain =
confidential or privileged information or both. No confidentiality or privi=
lege is waived or lost by any mis transmission. If you receive this corresp=
ondence in error please delete it from your system immediately and notify t=
he sender. You must not disclose, copy or relay on any part of this corresp=
ondence, if you are not the intended recipient. Any opinions expressed in t=
his message are those of the individual sender except where the sender expr=
essly, and with the authority, states them to be the opinions of the Queens=
land Government.<br><div>All reasonable precautions will be taken to respec=
t the privacy of individuals in accordance with the Information Privacy Act=
 2009 (Qld).<br><br></body>
</html>

--_000_7E1CBFD3B4F0F646B00AA77C64F3D9230EE50AE6KEDMBX01desqldi_--

--_005_7E1CBFD3B4F0F646B00AA77C64F3D9230EE50AE6KEDMBX01desqldi_
Content-Type: image/jpeg; name="image001.jpg"
Content-Description: image001.jpg
Content-Disposition: inline; filename="image001.jpg"; size=2705;
	creation-date="Thu, 25 Sep 2014 04:51:11 GMT";
	modification-date="Thu, 25 Sep 2014 04:51:11 GMT"
Content-ID: <image001.jpg@01CFD8CB.5631F8F0>
Content-Transfer-Encoding: base64

/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAoHBwkHBgoJCAkLCwoMDxkQDw4ODx4WFxIZJCAmJSMg
IyIoLTkwKCo2KyIjMkQyNjs9QEBAJjBGS0U+Sjk/QD3/2wBDAQsLCw8NDx0QEB09KSMpPT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT3/wAARCABMADwDASIA
AhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQA
AAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3
ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWm
p6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEA
AwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSEx
BhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElK
U1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3
uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD2asfW
9f8A7GuLSLyFmE+/cTMsflhVzk7u3B56Dj1qhdeKZNS0W7uPDMYvLq3coYsgE4z0yevQ49xkVTg8
QaZrenK92kaaoodIZDZmaRCP4wm0kYOCQehH0oAfq/jaE+Fm1PT7mK0GSha7jO4Pt3KgTuW4wc4w
c81mWevWctkbXWI5o9V1EGaZo7pVEbpnAV93yBdowPfnJJrOuAl3o/2GFoXtpglu93K+4B2LxnYB
1IPPT5VNYr6rp+palbXUqDyrglbm3N4/mTTEHdjaNoIO3AJ7DpQB3PhXxfczrqqeIZ7RLiw+aWKA
MTEvQdB8+7G4Y5+bGOlXtM8aRarqttbw2witrhGZJ5pgpJGPk2f3znO0nOBnFcrY3E0xjnhMUsup
Il40JAMpV5z91h95lVFyuCPlbp31tGurmbUbK0htdJnuICd7/wCskghVsbi44DHPCjPU88GgDu6K
5rXfHGn+HNbg0/UVkRJo1ZZlGVBJYYPp90fnWlp/iLTNTgea3u4tiSPH87AZKnGRz0PUHuMGgDlP
G2mf2VeprGnW/wBkU5a8u1BeIYB5khAy3X7wIOcZ7VW8NWOntBJodxdLcXVzOZ0vbORHIZMMGwM+
WSOhOcg8kHiu61jTl1bR7uwZzGLiJow46qSOCPoea5Npgnhqy1eC9g0/WpbUcB0jju2HUFWwpySc
Hgjd6ZFAFfxHYraavFFbahNcSLEXa1nHmfKxGR8mHYuVHXIAUknscy18JTXOnvKh1NVkYYS3lSOJ
xI3VUwcBQeAT356UkDtIssj6heiWaVJJ2+0MBAhGHjfnqMqM8AHnham06w0W2s5o1Es7uwhs7UXb
xRoGjLMCyvtxlWDEEj5RigA0jRFurnTLJleS1jQTPBBIYiuFBEh5xhg+0hQCSG561t6lruoWd5Bb
wWcelQlCsIcRySSEAlV8tSdq5AA9zjjvylvM+lQxjS5mS6VCqW5mIaBlkAC7AcBWJbCEt0znrXVH
T5NKzf20lkttcQLt1K5lJmiJAy20j52bJI5HYYwMUAZsVw3ibXYo7yyjWx1C4cSFmDSFYY+FA52o
WByeCdwA45PLz215PrOqHSEvkt1uipFtgLu2rnjaeenc1vaVZXgunttLjaO6eJoYGkQg26NjfcOD
ynCKqKcM23cQMmvQdH0W10TTo7O2TKr8zyPy8jHqzHqSfU0AVPEt/HFHa6YLtba41OYW6MGw4XBL
lffAwD2JFZOoTR3Oq22mfYon0SyuI7WSPcMtMVBQFSOY1BXPPJ9QDm54vMnnaSkUUO+S7ULJIOVc
EFBkcgZGTjrtx3rP1DRbvQXGo2gF4qutxcsYy0kkoDgsyr1Hz/w8rtHBAxQBkajAtl4i1p9N8+1W
y8pALUhcNIoO3J6KeSRjjjHWiHTbe6F1p12sUUESSNNKke8ERkEeWzHKjlsjA6+9WNX1/TtWiiu7
Pd5WoRpb3IZGC5H7xRuA+8oDZwD8rZ5xirEnh53hFtbOiLdRXM0CQSeYj/LEAGb5dykjOBgdOaAM
zUbac6JHqck093K0wt5UkZZPJw2Rg/XbyOxNallrIt/tunLEdRsmKNZwDClVZwDHvJwSNxKg44XG
e9UdDubUavFb3JMcasZJ4YcyQ+ax8pDuyeBkjdkAkjgFTWzq+h2+i+H4LazZwWvFcOcBtxBA6Ads
UAWfC91ZRX11Z2MTxW05NzCGiKENwJU56lWI9cbsdq6eqlvpVla3k13DbRpcTHLyAcnPX6fhVugD
D8W6VJqejO9rM0N3a5mgYDI3AdCMjORnHocHtVefxHqK6ZBdQ6XC3norIZLwKpyMjopNXtf1h9Ji
tI7e3W4ur24W2hR32JuIJJY4OAApPQ1g6drPh2e3xd6TbW11G5iliWBXVWEwh4YDkFiPwNAGfN9o
udUW7vbWNpn2CV0lVSFVgypGOwzjLklsDAwOmjJp9vcamVXSZVZQ3mW8V/shbdgnKjjnAzjg981G
3ijwWsU7i2t28qQIFW1GZM7gCvHI+Rufb3GZG8ReD1aXNnEYoommMwsv3ZAjWQgNjk7WBxQBRu0a
bUoriDT1hUMssREqboJAqquBjBQgLlTjBGQQabBp+oaxqN1Jf2qyI4DYhvBnccjILD5Vx/CDwe/N
Xv7Z0T7QznRYRZiyW6DC2UyEmQpjaOMcZzmpYtc8JTXFvEtjFtnjSVZTZYjUMjOu5sYBIRuPagDo
dEvft+lRTeW0fLRgNIHJ2sVzu75xmr9c/wCF9fg1pr2Kytfs9lamMQZjMZZGQMDtI4HPHtXQUAY/
iS3srmzgjvFuGkM6m2+zHEolAJBU9iBuznjGc1g2nhTR7RLVL/UZ1mUtMiSyiKR08wS/vQD85DqW
JrV8aymy0I6jGFaayfzEVxlW3AoQw7ghj6Vyunyb9Q8P2TKpg1KFJ5QRkqY2dlVfRecEc8fjQBvS
+FPDUMJt2uBErTrJCPPUGJzkgJn1Dng54I9qkOkeHBcELqCpcGVlBW7AYSGNYiB74VRj1+tc5cxR
2Wm6PMyfaGuLya0kEzHDJvCDO0jJCxIBnj1BrWuoE8luOdtxzgd7tTQAv/CK+FH2WUd+BMrbNqXS
7mfzDJyvTO7PGMdRirMWg+F7O3XN3GYbcxxEyXQIBRHVVPP9134/wqukCfbt2Bnzo+cD/n+Y1m6A
I3M0HlKPsd61sr5JZ0WGbbuySMjJ6ADmgDp/DOnaTpUt9baXczTyIY1m82UyFQEGwAnttxW/XKeD
7l/tl5Z4Xy47a0lB75aEKfw+QfrXV0Af/9k=

--_005_7E1CBFD3B4F0F646B00AA77C64F3D9230EE50AE6KEDMBX01desqldi_
Content-Type: image/jpeg; name="image002.jpg"
Content-Description: image002.jpg
Content-Disposition: inline; filename="image002.jpg"; size=2743;
	creation-date="Thu, 25 Sep 2014 04:51:11 GMT";
	modification-date="Thu, 25 Sep 2014 04:51:11 GMT"
Content-ID: <image002.jpg@01CFD8CB.5631F8F0>
Content-Transfer-Encoding: base64

/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAoHBwgHBgoICAgLCgoLDhgQDg0NDh0VFhEYIx8lJCIf
IiEmKzcvJik0KSEiMEExNDk7Pj4+JS5ESUM8SDc9Pjv/2wBDAQoLCw4NDhwQEBw7KCIoOzs7Ozs7
Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozv/wAARCAAcAMUDASIA
AhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQA
AAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3
ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWm
p6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEA
AwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSEx
BhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElK
U1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3
uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwDrNOS+
1K58iO9kRtpbLSNirM1xqmg3iLLcmZSN2CxZWH49KpaXftp1356xeadpXbnFWrh73xDfJttygUbR
wcKO5JrwISXJ7rfPc409NNzS8QavLHbwR2zmPz03lh1x6VVg8M3M9slx9rVZHAYDBPX3rR1jQ2vL
aAW7DzIE2ANwGFYfm6zo4AJmiQHgN8yf4V01k1UbrRbXkXP4ryWh0em217aadKt5OZHwdo3Z2jHr
XN6bDqGpyPHFeuhRdx3SNXQ6Xqx1Own8xQs0ancB0PHWub0l9RjlkOnLufaN3APH40VnB+ztdrX1
CTXu22LUV5qOjamtvcTNIuRuUtuBB7jNddJIsUTSMcKoJP0rjI5NutLJrSybwQegAHpn2+lb/iS6
EGksqn5pyFH06mtMPU5ITd9F0e5UJWTZzH9pXX2v7X5sm3zN2Nxx1ziu8jdZI1kU5VgCK4t4rf8A
4RyPE0ZnEu8pu5weP8K6Hw5dfaNJRSfmhJQ/0/Slg5OM3FvdXFSdnZmP4lkt/wDhJ7GG9F7JbtZy
t5doZMlty4OE56E/nU+g3mpWkWlaffpIXuvPbM7ZlSNTlA3qdpGat6pdaRpuuW1/f33kXAt3jjjI
JDKWUk8DsQPzqS8sYddWy1Gx1J4WiDGG4t9rhlYYI5BB6fhivXvokzW2pj6jqN3qWn6PdwwxLcf2
sY0VmIT5fMXJPXoM0zVtVubzRL21vI44ryxvreOQwsSjAujKwzyOD0rUHhWBdLtrCO/vEFrcm5jl
DKZNx3Hkkc/ePaorvRNOstImt72+uN99dIz3TAF3myNnAGAPlAxjFNOIrMW41ODTNT128eBj9ktY
pGIckycNgYPA6dvWtPSn1SSEvqcdqjMAyC3LHAI5Bz3HqKZLodrcSX7zl5BqEKwzKTgYUEceh5p+
mafNYIyy6jc3nAVfO2/IB0+6Bz6k1DasUr3Oc1yJ7XWry91myvbrTSqGC4tJmH2QAfNlFIPXncM1
f13xBLplvFJZT2TobczKJmd5JQBngKOBj+I+tW9Q0KW/knVtYvY7W4GJbdNmCMYIUlcqD7Go7zwv
bXMxeC6uLRHtRaSpDtw8QzgZIJHU8iqutLis+hl3/na14j0PdFbtbS2bXPkzbjtOUyeP4gDwfrT9
P8ZSX+p28aRwtb3Nw8KogfzY8bsO3G3BK9umRW1b6LDb3Njc+dK8llbG2Tdj5lO3k8dflFUtBsrN
i1zpGsTS6eJnItkKmNXJO4Zxuxkk4zTurBZ3KFhrOr2em3d9fNBcQx6kYnI3Zjj8zaSPYcY9s1u6
VqUmpXOoDy1W3trgwRODy5UDcfwYkfhVSfRDbaXq0EJmu473e62p2jaz9cN6ZOeelXNA0w6PodrY
s++SNP3r/wB9zyx/Ek1Ls1cFe5o0UlFQWLRRRQBxvhfB1f8A7Zt/SuxpiW8Ebbo4Y0PqqgGpK58P
RdKHK3ciEeVWMfU9fGm3qQGAum3LN0/L1qjqXiS1urCSCKKQtIMfOAAK6OSKOZdssauvowzUCabZ
RPvS0hVvUIKmpTrSbSlo/IUozezMbw7ZSwWNzcyqUEqYQHqQAeaydE1SLS5pJJI2cOoACketdxgE
YI4qL7Ha/wDPtF/3wKzeFaUeR25SfZvSz2OM1C7k1zUVMEJBICIvU/U/nVnXnaa/ttPRtxhVU+rH
H/1q6yOCKL/VxImf7qgUfZ4fM8zyU35zu2jP51LwkmneWr3D2Ts7vcxG8J2mw7ZZd+OMkYz+VUvC
1wYL+W0c43jp/tCurpgt4FfesMYfruCjNavCxU4zhpYr2aTTRzWtm6HjGx+yXdvayGwmy9wm5SN6
cYyOaoaTdm00DSooZfKC6w0E0iP8k3zOWIP90nt+Fddd6ZYagVN5ZQXBQYUyxhsfTNLLp1jPZfYp
bSF7YAAQlBsGOnFd/MrWHyu9zm2ur/UtN1tLDUF81NQ8uJjNt+QBMorfwk/MAfU1Cmpv/ZEMcDXl
tNDq0VvOk9x5pGSCVD/xLgiumGjaYLV7UafbCByC0YiG0kcA4/CpItOsoLdLeK0hSGNg6oEGA3XO
PX3o5kHKzktZlvVl1+9j1O7iOnyQtBEkmIxlVJyO4Oehp2vXOq3XiG7sbWVofs9okluRd+QNxLZc
jB3gEAY6D8a657O2kEoe3jYTY8wFAd+OmfWo7zTLDUGja8s4Lgx/cMsYbb9M0Ka7Bys5jX5tQtZY
tRupJZrKC0Rp47K88p4nzlnx/GCOg9qdrt1dWeq/2nO9zLpiLFhbW68t4CTyWj/jzkfh2ro7jSNN
up0nuLG3lljACu8YJGOlLLpWnz3i3k1lBJcLjErRgsMdOaFJBysp+J72Wy0C4a3ybmcCC3UcEyOd
q/zz+FYGkfatGu9S0uO1GnGayFxaCR1cB0XYx+X6IT+NdlJDFMUMsav5bB13DO1vUe9QahYw3lvI
HBWTynRZk4kjDDB2t2pRlpYbWtzjPDt7e3cNxqltfXc0cGn7xbz3SyGS4wcttBJC9MA4+lW/DUmq
zNBdyXRe2uLIvLvvRKXk4IZVx8ncEDgcelM8Gqb/AFie9uGBls4jboURU3KSCS2AMngfrXV22laf
ZzSTW1jbwyS/faOMKW+uKubSbRMVc5fw9JeRz+H55dTu7k6jaSNOs0m5SQqkEDtjP41a0BH1Oze+
udWuVvbozxGAT4WLDFQFTsVABz1ro0tLaPytkEa+QCsWFA2A9QPSo00ywivXvY7OBLl/vTCMBj+N
Q5JjUTjdPXWfFGYxqt1YHTokt5zC+3zJwWDk/kv50V0nhfEmj/a2AEt3NJNKQMZbcR/IAfhRTc2n
ZAoprU//2Q==

--_005_7E1CBFD3B4F0F646B00AA77C64F3D9230EE50AE6KEDMBX01desqldi_--



From MAILER-DAEMON Thu Sep 25 03:40:16 2014
Received: from list by lists.gnu.org with archive (Exim 4.71)
	id 1XX3ey-0001pu-P8
	for mharc-bug-tar@gnu.org; Thu, 25 Sep 2014 03:40:16 -0400
Received: from eggs.gnu.org ([2001:4830:134:3::10]:59798)
	by lists.gnu.org with esmtp (Exim 4.71)
	(envelope-from <gray@gnu.org.ua>) id 1XX3eq-0001nc-Sd
	for bug-tar@gnu.org; Thu, 25 Sep 2014 03:40:14 -0400
Received: from Debian-exim by eggs.gnu.org with spam-scanned (Exim 4.71)
	(envelope-from <gray@gnu.org.ua>) id 1XX3ek-00058x-Oz
	for bug-tar@gnu.org; Thu, 25 Sep 2014 03:40:08 -0400
Received: from ulysses.gnu.org.ua ([193.186.15.43]:42596 helo=gnu.org.ua)
	by eggs.gnu.org with esmtp (Exim 4.71)
	(envelope-from <gray@gnu.org.ua>) id 1XX3ek-00051M-ET
	for bug-tar@gnu.org; Thu, 25 Sep 2014 03:40:02 -0400
X-Mailutils-Message-Id: s8P7S7Mu030653
Organization: GNU.org.ua
Received: from gnu.org.ua (localhost [127.0.0.1]) 
	by ulysses.gnu.org.ua with ESMTP id s8P7S7Mu030653;
	Thu, 25 Sep 2014 10:28:09 +0300
Message-ID: <20140925102807.30647@ulysses.gnu.org.ua>
Date: Thu, 25 Sep 2014 10:28:07 +0300
From: Sergey Poznyakoff <gray@gnu.org.ua>
To: "Howard Bryden" <Howard.Bryden@psba.qld.gov.au>
In-reply-to: Your message of Thu, 25 Sep 2014 04:51:12 +0000
	<7E1CBFD3B4F0F646B00AA77C64F3D9230EE50AE6@KEDMBX01.desqld.internal>
References: <7E1CBFD3B4F0F646B00AA77C64F3D9230EE50AE6@KEDMBX01.desqld.internal>
X-Mailer: MH-E 8.3.1; GNU Mailutils 2.99.98; GNU Emacs 24.2.1
X-detected-operating-system: by eggs.gnu.org: GNU/Linux 3.x
X-Received-From: 193.186.15.43
Cc: "bug-tar@gnu.org" <bug-tar@gnu.org>
Subject: Re: [Bug-tar] GNU tar directory metadata
X-BeenThere: bug-tar@gnu.org
X-Mailman-Version: 2.1.14
Precedence: list
List-Id: Bug reports for GNU Tar <bug-tar.gnu.org>
List-Unsubscribe: <https://lists.gnu.org/mailman/options/bug-tar>,
	<mailto:bug-tar-request@gnu.org?subject=unsubscribe>
List-Archive: <http://lists.gnu.org/archive/html/bug-tar>
List-Post: <mailto:bug-tar@gnu.org>
List-Help: <mailto:bug-tar-request@gnu.org?subject=help>
List-Subscribe: <https://lists.gnu.org/mailman/listinfo/bug-tar>,
	<mailto:bug-tar-request@gnu.org?subject=subscribe>
X-List-Received-Date: Thu, 25 Sep 2014 07:40:15 -0000

Hi Howard,

> When restoring files from a streamed archived (i.e. via the option -f
> -), it appears the parent subdirectories are restored with the user's
> ownership and umasked permissions (subject to any use of
> --no-overwrite-dir).

It does not depend on whether you use -f - or restore directly from the
archive.  The key part is using explicit member names in the command
line.  This instructs tar to extract only the listed members, and
nothing more.  In other words, when you do

  tar xf archive.tar etc/opt/wbem/cimserver_start.conf

tar extracts only etc/opt/wbem/cimserver_start.conf, *not* any of its
parent directories.  If any of its path components does not exist, tar
simply creates it, using current owner and umask settings.  In contrast,
when you do 

  tar xf archive.tar

then tar extracts all archive members, including directories, with their
proper ownerships and permission bits.

If you wish to restore directories as well, you'll need to specify them
explicitly, e.g.:

  tar -xf - --no-recursion etc/opt/wbem etc/opt/wbem/cimserver_start.conf

(notice the --no-recursion option).

Regards,
Sergey



From MAILER-DAEMON Sun Sep 28 13:12:17 2014
Received: from list by lists.gnu.org with archive (Exim 4.71)
	id 1XYI1A-0004hC-Vx
	for mharc-bug-tar@gnu.org; Sun, 28 Sep 2014 13:12:16 -0400
Received: from eggs.gnu.org ([2001:4830:134:3::10]:44487)
	by lists.gnu.org with esmtp (Exim 4.71) (envelope-from <pv4@bk.ru>)
	id 1XYI14-0004h3-Kd
	for bug-tar@gnu.org; Sun, 28 Sep 2014 13:12:15 -0400
Received: from Debian-exim by eggs.gnu.org with spam-scanned (Exim 4.71)
	(envelope-from <pv4@bk.ru>) id 1XYI0z-0003XN-9z
	for bug-tar@gnu.org; Sun, 28 Sep 2014 13:12:10 -0400
Received: from f129.mail.ru ([94.100.178.190]:38547 helo=f129.i.mail.ru)
	by eggs.gnu.org with esmtp (Exim 4.71) (envelope-from <pv4@bk.ru>)
	id 1XYI0y-0003PE-Kb
	for bug-tar@gnu.org; Sun, 28 Sep 2014 13:12:05 -0400
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed; d=bk.ru;
	s=mail; 
	h=Content-Transfer-Encoding:Content-Type:Message-ID:Reply-To:Date:Mime-Version:Subject:To:From;
	bh=3bb1t7OXuJQbjHNfumb3LezXcDvqBLWVlB+g8Re1W7U=; 
	b=Xlj+dBkrgoZTaSCpuwE55yLjiUN35opDjag6SmQgtZjiBzzjlfwqQueWRa5QPUP+ypTlkMPdib5Fm17VgNHEq/7SxqXhEYV/73dxyQnCn+H0Mm/bnUHdWIn+r56KOMHNuZ8mZM7sbnrmjDxZ6oyw3IGG3ke4v6rd922WXsatKgE=;
Received: from [128.75.167.250] (ident=mail)
	by f129.i.mail.ru with local (envelope-from <pv4@bk.ru>)
	id 1XYI0q-0000oq-F9
	for bug-tar@gnu.org; Sun, 28 Sep 2014 21:11:56 +0400
Received: from [128.75.167.250] by e.mail.ru with HTTP;
	Sun, 28 Sep 2014 21:11:56 +0400
From: =?UTF-8?B?VmxhZGltaXIgQS4gUGF2bG92?= <pv4@bk.ru>
To: bug-tar@gnu.org
Mime-Version: 1.0
X-Mailer: Mail.Ru Mailer 1.0
X-Originating-IP: [128.75.167.250]
Date: Sun, 28 Sep 2014 21:11:56 +0400
X-Priority: 3 (Normal)
Message-ID: <1411924316.874467040@f129.i.mail.ru>
X-Cloud-Ids: 
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: base64
X-Mras: Ok
X-Spam: undefined
X-detected-operating-system: by eggs.gnu.org: Genre and OS details not
	recognized.
X-Received-From: 94.100.178.190
Subject: [Bug-tar] =?utf-8?q?Status_of_feature_request=3A_ignore_requested?=
 =?utf-8?q?_members_missing_in_archive?=
X-BeenThere: bug-tar@gnu.org
X-Mailman-Version: 2.1.14
Precedence: list
Reply-To: =?UTF-8?B?VmxhZGltaXIgQS4gUGF2bG92?= <pv4@bk.ru>
List-Id: Bug reports for GNU Tar <bug-tar.gnu.org>
List-Unsubscribe: <https://lists.gnu.org/mailman/options/bug-tar>,
	<mailto:bug-tar-request@gnu.org?subject=unsubscribe>
List-Archive: <http://lists.gnu.org/archive/html/bug-tar>
List-Post: <mailto:bug-tar@gnu.org>
List-Help: <mailto:bug-tar-request@gnu.org?subject=help>
List-Subscribe: <https://lists.gnu.org/mailman/listinfo/bug-tar>,
	<mailto:bug-tar-request@gnu.org?subject=subscribe>
X-List-Received-Date: Sun, 28 Sep 2014 17:12:16 -0000

RGVhciB0YXIgZGV2ZWxvcGVycyEKCkNvdWxkIHlvdSBwbGVhc2UgY2xhcmlmeSB0aGUgc3RhdHVz
IG9mIG15IHByZXZpb3VzIGVtYWlsIHdpdGggYSBwYXRjaCBmb3IKZmVhdHVyZSByZXF1ZXN0OiBo
dHRwOi8vbGlzdHMuZ251Lm9yZy9hcmNoaXZlL2h0bWwvYnVnLXRhci8yMDE0LTA2L21zZzAwMDAz
Lmh0bWwgPwoKVGhlIHByZXZpb3VzIHN0YXR1cyByZXF1ZXN0IHdhcyBzZW50IGEgbW9udGggYW5k
IGEgaGFsZiBhZ28gYW5kIGl0IHdhcyBzYWlkCnRoZSByZXF1ZXN0IHdvdWxkIGJlIHByb2Nlc3Nl
ZCBhZnRlciBzb21lIHRpbWU6Cmh0dHA6Ly9saXN0cy5nbnUub3JnL2FyY2hpdmUvaHRtbC9idWct
dGFyLzIwMTQtMDcvbXNnMDAwMjUuaHRtbAoKSSB3b3VsZG4ndCBsaWtlIHRvIHByZXNzIHlvdSAo
SSB1bmRlcnN0YW5kIHlvdSBtYXkgYmUgYnVzeSBvciBtYXkgaGF2ZSBwZXJzb25hbAphZmZhaXJz
KSBidXQgSSBqdXN0IHdvdWxkIGxpa2UgdG8ga25vdyB0aGUgcmVxdWVzdCBpcyBub3QgZm9yZ290
dGVuLgoKLS0gClZsYWRpbWlyIEEuIFBhdmxvdiAK


From MAILER-DAEMON Sun Sep 28 16:49:25 2014
Received: from list by lists.gnu.org with archive (Exim 4.71)
	id 1XYLPJ-0001Iy-Oz
	for mharc-bug-tar@gnu.org; Sun, 28 Sep 2014 16:49:25 -0400
Received: from eggs.gnu.org ([2001:4830:134:3::10]:41575)
	by lists.gnu.org with esmtp (Exim 4.71)
	(envelope-from <gray@gnu.org.ua>) id 1XYLPE-0001I4-MI
	for bug-tar@gnu.org; Sun, 28 Sep 2014 16:49:25 -0400
Received: from Debian-exim by eggs.gnu.org with spam-scanned (Exim 4.71)
	(envelope-from <gray@gnu.org.ua>) id 1XYLPA-0005f0-8z
	for bug-tar@gnu.org; Sun, 28 Sep 2014 16:49:20 -0400
Received: from ulysses.gnu.org.ua ([193.186.15.43]:35956 helo=gnu.org.ua)
	by eggs.gnu.org with esmtp (Exim 4.71)
	(envelope-from <gray@gnu.org.ua>) id 1XYLP9-0005eX-Os
	for bug-tar@gnu.org; Sun, 28 Sep 2014 16:49:16 -0400
X-Mailutils-Message-Id: s8SKb1Ye030388
Organization: GNU.org.ua
Received: from gnu.org.ua (localhost [127.0.0.1]) 
	by ulysses.gnu.org.ua with ESMTP id s8SKb1Ye030388;
	Sun, 28 Sep 2014 23:37:01 +0300
Message-ID: <20140928233701.30383@ulysses.gnu.org.ua>
Date: Sun, 28 Sep 2014 23:37:01 +0300
From: Sergey Poznyakoff <gray@gnu.org.ua>
To: "=?UTF-8?B?VmxhZGltaXIgQS4gUGF2bG92?=" <pv4@bk.ru>
In-reply-to: Your message of Sun,
	28 Sep 2014 21:11:56 +0400 <1411924316.874467040@f129.i.mail.ru>
References: <1411924316.874467040@f129.i.mail.ru>
X-Mailer: MH-E 8.3.1; GNU Mailutils 2.99.98; GNU Emacs 24.2.1
X-detected-operating-system: by eggs.gnu.org: GNU/Linux 3.x
X-Received-From: 193.186.15.43
Cc: bug-tar@gnu.org
Subject: Re: [Bug-tar] Status of feature request: ignore requested members
	missing in archive
X-BeenThere: bug-tar@gnu.org
X-Mailman-Version: 2.1.14
Precedence: list
List-Id: Bug reports for GNU Tar <bug-tar.gnu.org>
List-Unsubscribe: <https://lists.gnu.org/mailman/options/bug-tar>,
	<mailto:bug-tar-request@gnu.org?subject=unsubscribe>
List-Archive: <http://lists.gnu.org/archive/html/bug-tar>
List-Post: <mailto:bug-tar@gnu.org>
List-Help: <mailto:bug-tar-request@gnu.org?subject=help>
List-Subscribe: <https://lists.gnu.org/mailman/listinfo/bug-tar>,
	<mailto:bug-tar-request@gnu.org?subject=subscribe>
X-List-Received-Date: Sun, 28 Sep 2014 20:49:25 -0000

Vladimir A. Pavlov <pv4@bk.ru> ha escrit:

> Could you please clarify the status of my previous email with a patch for
> feature request:
> http://lists.gnu.org/archive/html/bug-tar/2014-06/msg00003.html ?
[..]
> I just would like to know the request is not forgotten.

No, it is by no means forgotten.  I will let you know when I have time
to finish reviewing it.

Regards,
Sergey



